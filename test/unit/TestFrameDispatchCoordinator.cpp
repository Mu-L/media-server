#include <gtest/gtest.h>

#include "FrameDispatchCoordinator.h"
#include "../test/unit/TestCommon.h"
#include "video.h"
#include "audio.h"

namespace
{
// A test frame info vector. Each element is a tuple of media type, arrival time (ms),
// timestamp and clock rate.
std::vector<std::tuple<MediaFrame::Type, uint64_t, uint64_t, uint32_t>> TestFramesInfo = 
{
	{MediaFrame::Audio, 1687762794623, 2198836224, 48000},
	{MediaFrame::Audio, 1687762794623, 2198837248, 48000},
	{MediaFrame::Audio, 1687762794623, 2198838272, 48000},
	{MediaFrame::Audio, 1687762794623, 2198839296, 48000},
	{MediaFrame::Audio, 1687762794623, 2198840320, 48000},
	{MediaFrame::Audio, 1687762794633, 2198841344, 48000},
	{MediaFrame::Audio, 1687762794633, 2198842368, 48000},
	{MediaFrame::Audio, 1687762794633, 2198843392, 48000},
	{MediaFrame::Audio, 1687762794786, 2198844416, 48000},
	{MediaFrame::Audio, 1687762794786, 2198845440, 48000},
	{MediaFrame::Audio, 1687762794786, 2198846464, 48000},
	{MediaFrame::Audio, 1687762794786, 2198847488, 48000},
	{MediaFrame::Audio, 1687762794786, 2198848512, 48000},
	{MediaFrame::Audio, 1687762794799, 2198849536, 48000},
	{MediaFrame::Audio, 1687762794799, 2198850560, 48000},
	{MediaFrame::Audio, 1687762794799, 2198851584, 48000},
	{MediaFrame::Video, 1687762794880, 4122854853, 90000},
	{MediaFrame::Video, 1687762794931, 4122857856, 90000},
	{MediaFrame::Video, 1687762794951, 4122860859, 90000},
	{MediaFrame::Audio, 1687762794982, 2198852608, 48000},
	{MediaFrame::Audio, 1687762794982, 2198853632, 48000},
	{MediaFrame::Audio, 1687762794982, 2198854656, 48000},
	{MediaFrame::Audio, 1687762794982, 2198855680, 48000},
	{MediaFrame::Audio, 1687762794982, 2198856704, 48000},
	{MediaFrame::Audio, 1687762794982, 2198857728, 48000},
	{MediaFrame::Audio, 1687762794982, 2198858752, 48000},
	{MediaFrame::Audio, 1687762794992, 2198859776, 48000},
	{MediaFrame::Video, 1687762794992, 4122863862, 90000},
	{MediaFrame::Video, 1687762795019, 4122866865, 90000},
	{MediaFrame::Video, 1687762795049, 4122869868, 90000},
	{MediaFrame::Video, 1687762795100, 4122872871, 90000},
	{MediaFrame::Video, 1687762795121, 4122875874, 90000},
	{MediaFrame::Audio, 1687762795151, 2198860800, 48000},
	{MediaFrame::Audio, 1687762795151, 2198861824, 48000},
	{MediaFrame::Audio, 1687762795151, 2198862848, 48000},
	{MediaFrame::Audio, 1687762795151, 2198863872, 48000},
	{MediaFrame::Audio, 1687762795151, 2198864896, 48000},
	{MediaFrame::Audio, 1687762795151, 2198865920, 48000},
	{MediaFrame::Audio, 1687762795151, 2198866944, 48000},
	{MediaFrame::Audio, 1687762795151, 2198867968, 48000},
	{MediaFrame::Video, 1687762795161, 4122878877, 90000},
	{MediaFrame::Video, 1687762795182, 4122881880, 90000},
	{MediaFrame::Video, 1687762795221, 4122884883, 90000},
	{MediaFrame::Video, 1687762795252, 4122887886, 90000},
	{MediaFrame::Video, 1687762795293, 4122890889, 90000},
	{MediaFrame::Audio, 1687762795323, 2198868992, 48000},
	{MediaFrame::Audio, 1687762795323, 2198870016, 48000},
	{MediaFrame::Audio, 1687762795323, 2198871040, 48000},
	{MediaFrame::Audio, 1687762795323, 2198872064, 48000},
	{MediaFrame::Audio, 1687762795323, 2198873088, 48000},
	{MediaFrame::Audio, 1687762795323, 2198874112, 48000},
	{MediaFrame::Audio, 1687762795333, 2198875136, 48000},
	{MediaFrame::Audio, 1687762795334, 2198876160, 48000},
	{MediaFrame::Video, 1687762795334, 4122893892, 90000},
	{MediaFrame::Video, 1687762795354, 4122896895, 90000},
	{MediaFrame::Video, 1687762795395, 4122899898, 90000},
	{MediaFrame::Video, 1687762795425, 4122902901, 90000},
	{MediaFrame::Video, 1687762795462, 4122905904, 90000},
	{MediaFrame::Audio, 1687762795482, 2198877184, 48000},
	{MediaFrame::Audio, 1687762795482, 2198878208, 48000},
	{MediaFrame::Audio, 1687762795482, 2198879232, 48000},
	{MediaFrame::Audio, 1687762795482, 2198880256, 48000},
	{MediaFrame::Audio, 1687762795482, 2198881280, 48000},
	{MediaFrame::Audio, 1687762795482, 2198882304, 48000},
	{MediaFrame::Audio, 1687762795482, 2198883328, 48000},
	{MediaFrame::Audio, 1687762795482, 2198884352, 48000},
	{MediaFrame::Video, 1687762795482, 4122908907, 90000},
	{MediaFrame::Video, 1687762795522, 4122911910, 90000},
	{MediaFrame::Video, 1687762795572, 4122914913, 90000},
	{MediaFrame::Video, 1687762795593, 4122917916, 90000},
	{MediaFrame::Video, 1687762795633, 4122920919, 90000},
	{MediaFrame::Audio, 1687762795654, 2198885376, 48000},
	{MediaFrame::Audio, 1687762795654, 2198886400, 48000},
	{MediaFrame::Audio, 1687762795654, 2198887424, 48000},
	{MediaFrame::Audio, 1687762795654, 2198888448, 48000},
	{MediaFrame::Audio, 1687762795654, 2198889472, 48000},
	{MediaFrame::Audio, 1687762795654, 2198890496, 48000},
	{MediaFrame::Audio, 1687762795654, 2198891520, 48000},
	{MediaFrame::Audio, 1687762795654, 2198892544, 48000},
	{MediaFrame::Video, 1687762795654, 4122923922, 90000},
	{MediaFrame::Video, 1687762795695, 4122926925, 90000},
	{MediaFrame::Video, 1687762795725, 4122929928, 90000},
	{MediaFrame::Video, 1687762795766, 4122932931, 90000},
	{MediaFrame::Video, 1687762795786, 4122935934, 90000},
	{MediaFrame::Audio, 1687762795825, 2198893568, 48000},
	{MediaFrame::Audio, 1687762795826, 2198894592, 48000},
	{MediaFrame::Audio, 1687762795826, 2198895616, 48000},
	{MediaFrame::Audio, 1687762795826, 2198896640, 48000},
	{MediaFrame::Audio, 1687762795826, 2198897664, 48000},
	{MediaFrame::Audio, 1687762795826, 2198898688, 48000},
	{MediaFrame::Audio, 1687762795826, 2198899712, 48000},
	{MediaFrame::Audio, 1687762795826, 2198900736, 48000},
	{MediaFrame::Video, 1687762795826, 4122938937, 90000},
	{MediaFrame::Video, 1687762795866, 4122941940, 90000},
	{MediaFrame::Video, 1687762795894, 4122944943, 90000},
	{MediaFrame::Video, 1687762795934, 4122947947, 90000},
	{MediaFrame::Video, 1687762795954, 4122950949, 90000},
	{MediaFrame::Audio, 1687762795994, 2198901760, 48000},
	{MediaFrame::Audio, 1687762795994, 2198902784, 48000},
	{MediaFrame::Audio, 1687762795994, 2198903808, 48000},
	{MediaFrame::Audio, 1687762795994, 2198904832, 48000},
	{MediaFrame::Audio, 1687762795994, 2198905856, 48000},
	{MediaFrame::Audio, 1687762795994, 2198906880, 48000},
	{MediaFrame::Audio, 1687762795994, 2198907904, 48000},
	{MediaFrame::Audio, 1687762795994, 2198908928, 48000},
	{MediaFrame::Video, 1687762795994, 4122953952, 90000},
	{MediaFrame::Video, 1687762796022, 4122956968, 90000},
	{MediaFrame::Video, 1687762796062, 4122959958, 90000},
	{MediaFrame::Video, 1687762796102, 4122962961, 90000},
	{MediaFrame::Video, 1687762796123, 4122965964, 90000},
	{MediaFrame::Audio, 1687762796153, 2198909952, 48000},
	{MediaFrame::Audio, 1687762796153, 2198910976, 48000},
	{MediaFrame::Audio, 1687762796153, 2198912000, 48000},
	{MediaFrame::Audio, 1687762796153, 2198913024, 48000},
	{MediaFrame::Audio, 1687762796153, 2198914048, 48000},
	{MediaFrame::Audio, 1687762796153, 2198915072, 48000},
	{MediaFrame::Audio, 1687762796163, 2198916096, 48000},
	{MediaFrame::Video, 1687762796163, 4122968968, 90000},
	{MediaFrame::Video, 1687762796193, 4122971970, 90000},
	{MediaFrame::Video, 1687762796233, 4122974973, 90000},
	{MediaFrame::Video, 1687762796253, 4122977976, 90000},
	{MediaFrame::Video, 1687762796293, 4122980980, 90000},
	{MediaFrame::Audio, 1687762796324, 2198917120, 48000},
	{MediaFrame::Audio, 1687762796324, 2198918144, 48000},
	{MediaFrame::Audio, 1687762796324, 2198919168, 48000},
	{MediaFrame::Audio, 1687762796324, 2198920192, 48000},
	{MediaFrame::Audio, 1687762796324, 2198921216, 48000},
	{MediaFrame::Audio, 1687762796324, 2198922240, 48000},
	{MediaFrame::Audio, 1687762796324, 2198923264, 48000},
	{MediaFrame::Audio, 1687762796324, 2198924288, 48000},
	{MediaFrame::Video, 1687762796324, 4122983983, 90000},
	{MediaFrame::Video, 1687762796355, 4122986985, 90000},
	{MediaFrame::Video, 1687762796405, 4122989988, 90000},
	{MediaFrame::Video, 1687762796426, 4122992991, 90000},
	{MediaFrame::Video, 1687762796467, 4122995994, 90000},
	{MediaFrame::Audio, 1687762796497, 2198925312, 48000},
	{MediaFrame::Audio, 1687762796497, 2198926336, 48000},
	{MediaFrame::Audio, 1687762796497, 2198927360, 48000},
	{MediaFrame::Audio, 1687762796497, 2198928384, 48000},
	{MediaFrame::Audio, 1687762796497, 2198929408, 48000},
	{MediaFrame::Audio, 1687762796497, 2198930432, 48000},
	{MediaFrame::Audio, 1687762796497, 2198931456, 48000},
	{MediaFrame::Audio, 1687762796497, 2198932480, 48000},
	{MediaFrame::Video, 1687762796497, 4122998997, 90000},
	{MediaFrame::Video, 1687762796538, 4123002000, 90000},
	{MediaFrame::Video, 1687762796558, 4123005003, 90000},
	{MediaFrame::Video, 1687762796589, 4123008006, 90000},
	{MediaFrame::Video, 1687762796633, 4123011009, 90000},
	{MediaFrame::Audio, 1687762796653, 2198933504, 48000},
	{MediaFrame::Audio, 1687762796653, 2198934528, 48000},
	{MediaFrame::Audio, 1687762796654, 2198935552, 48000},
	{MediaFrame::Audio, 1687762796654, 2198936576, 48000},
	{MediaFrame::Audio, 1687762796654, 2198937600, 48000},
	{MediaFrame::Audio, 1687762796654, 2198938624, 48000},
	{MediaFrame::Audio, 1687762796654, 2198939648, 48000},
	{MediaFrame::Audio, 1687762796654, 2198940672, 48000},
	{MediaFrame::Video, 1687762796654, 4123014012, 90000},
	{MediaFrame::Video, 1687762796704, 4123017015, 90000},
	{MediaFrame::Video, 1687762796725, 4123020018, 90000},
	{MediaFrame::Video, 1687762796765, 4123023022, 90000},
	{MediaFrame::Video, 1687762796796, 4123026024, 90000},
	{MediaFrame::Audio, 1687762796827, 2198941696, 48000},
	{MediaFrame::Audio, 1687762796827, 2198942720, 48000},
	{MediaFrame::Audio, 1687762796827, 2198943744, 48000},
	{MediaFrame::Audio, 1687762796827, 2198944768, 48000},
	{MediaFrame::Audio, 1687762796827, 2198945792, 48000},
	{MediaFrame::Audio, 1687762796827, 2198946816, 48000},
	{MediaFrame::Audio, 1687762796827, 2198947840, 48000},
	{MediaFrame::Video, 1687762796827, 4123029028, 90000},
	{MediaFrame::Video, 1687762796873, 4123032031, 90000},
	{MediaFrame::Video, 1687762796893, 4123035033, 90000},
	{MediaFrame::Video, 1687762796933, 4123038037, 90000},
	{MediaFrame::Video, 1687762796953, 4123041040, 90000},
	{MediaFrame::Audio, 1687762796993, 2198948864, 48000},
	{MediaFrame::Audio, 1687762796993, 2198949888, 48000},
	{MediaFrame::Audio, 1687762796994, 2198950912, 48000},
	{MediaFrame::Audio, 1687762796994, 2198951936, 48000},
	{MediaFrame::Audio, 1687762796994, 2198952960, 48000},
	{MediaFrame::Audio, 1687762796994, 2198953984, 48000},
	{MediaFrame::Audio, 1687762796994, 2198955008, 48000},
	{MediaFrame::Audio, 1687762796994, 2198956032, 48000},
	{MediaFrame::Video, 1687762796994, 4123044043, 90000},
	{MediaFrame::Video, 1687762797024, 4123047046, 90000},
	{MediaFrame::Video, 1687762797065, 4123050049, 90000},
	{MediaFrame::Video, 1687762797095, 4123053051, 90000},
	{MediaFrame::Video, 1687762797126, 4123056055, 90000},
	{MediaFrame::Audio, 1687762797152, 2198957056, 48000},
	{MediaFrame::Audio, 1687762797152, 2198958080, 48000},
	{MediaFrame::Audio, 1687762797152, 2198959104, 48000},
	{MediaFrame::Audio, 1687762797152, 2198960128, 48000},
	{MediaFrame::Audio, 1687762797152, 2198961152, 48000},
	{MediaFrame::Audio, 1687762797152, 2198962176, 48000},
	{MediaFrame::Audio, 1687762797172, 2198963200, 48000},
	{MediaFrame::Audio, 1687762797172, 2198964224, 48000},
	{MediaFrame::Video, 1687762797172, 4123059058, 90000},
	{MediaFrame::Video, 1687762797192, 4123062061, 90000},
	{MediaFrame::Video, 1687762797233, 4123065064, 90000},
	{MediaFrame::Video, 1687762797253, 4123068067, 90000},
	{MediaFrame::Video, 1687762797294, 4123071070, 90000},
	{MediaFrame::Audio, 1687762797325, 2198965248, 48000},
	{MediaFrame::Audio, 1687762797325, 2198966272, 48000},
	{MediaFrame::Audio, 1687762797325, 2198967296, 48000},
	{MediaFrame::Audio, 1687762797325, 2198968320, 48000},
	{MediaFrame::Audio, 1687762797325, 2198969344, 48000},
	{MediaFrame::Audio, 1687762797325, 2198970368, 48000},
	{MediaFrame::Audio, 1687762797325, 2198971392, 48000},
	{MediaFrame::Audio, 1687762797325, 2198972416, 48000},
	{MediaFrame::Video, 1687762797325, 4123074085, 90000},
	{MediaFrame::Video, 1687762797365, 4123077076, 90000},
	{MediaFrame::Video, 1687762797405, 4123080079, 90000},
	{MediaFrame::Video, 1687762797425, 4123083082, 90000},
	{MediaFrame::Video, 1687762797465, 4123086085, 90000},
	{MediaFrame::Audio, 1687762797493, 2198973440, 48000},
	{MediaFrame::Audio, 1687762797493, 2198974464, 48000},
	{MediaFrame::Audio, 1687762797494, 2198975488, 48000},
	{MediaFrame::Audio, 1687762797494, 2198976512, 48000},
	{MediaFrame::Audio, 1687762797494, 2198977536, 48000},
	{MediaFrame::Audio, 1687762797494, 2198978560, 48000},
	{MediaFrame::Audio, 1687762797494, 2198979584, 48000},
	{MediaFrame::Audio, 1687762797494, 2198980608, 48000},
	{MediaFrame::Video, 1687762797494, 4123089088, 90000},
	{MediaFrame::Video, 1687762797534, 4123092091, 90000},
	{MediaFrame::Video, 1687762797554, 4123095094, 90000},
	{MediaFrame::Video, 1687762797595, 4123098097, 90000},
	{MediaFrame::Video, 1687762797625, 4123101100, 90000},
	{MediaFrame::Audio, 1687762797656, 2198981632, 48000},
	{MediaFrame::Audio, 1687762797656, 2198982656, 48000},
	{MediaFrame::Audio, 1687762797656, 2198983680, 48000},
	{MediaFrame::Audio, 1687762797656, 2198984704, 48000},
	{MediaFrame::Audio, 1687762797656, 2198985728, 48000},
	{MediaFrame::Audio, 1687762797656, 2198986752, 48000},
	{MediaFrame::Audio, 1687762797656, 2198987776, 48000},
	{MediaFrame::Audio, 1687762797656, 2198988800, 48000},
	{MediaFrame::Video, 1687762797665, 4123104103, 90000},
	{MediaFrame::Video, 1687762797705, 4123107106, 90000},
	{MediaFrame::Video, 1687762797725, 4123110109, 90000},
	{MediaFrame::Video, 1687762797761, 4123113112, 90000},
	{MediaFrame::Video, 1687762797792, 4123116115, 90000},
	{MediaFrame::Audio, 1687762797823, 2198989824, 48000},
	{MediaFrame::Audio, 1687762797823, 2198990848, 48000},
	{MediaFrame::Audio, 1687762797823, 2198991872, 48000},
	{MediaFrame::Audio, 1687762797823, 2198992896, 48000},
	{MediaFrame::Audio, 1687762797823, 2198993920, 48000},
	{MediaFrame::Audio, 1687762797823, 2198994944, 48000},
	{MediaFrame::Audio, 1687762797833, 2198995968, 48000},
	{MediaFrame::Audio, 1687762797833, 2198996992, 48000},
	{MediaFrame::Video, 1687762797833, 4123119118, 90000},
	{MediaFrame::Video, 1687762797853, 4123122121, 90000},
	{MediaFrame::Video, 1687762797894, 4123125124, 90000},
	{MediaFrame::Video, 1687762797934, 4123128127, 90000},
	{MediaFrame::Video, 1687762797954, 4123131130, 90000},
	{MediaFrame::Audio, 1687762797990, 2198998016, 48000},
	{MediaFrame::Audio, 1687762797990, 2198999040, 48000},
	{MediaFrame::Audio, 1687762797990, 2199000064, 48000},
	{MediaFrame::Audio, 1687762797990, 2199001088, 48000},
	{MediaFrame::Audio, 1687762797990, 2199002112, 48000},
	{MediaFrame::Audio, 1687762797990, 2199003136, 48000},
	{MediaFrame::Audio, 1687762798010, 2199004160, 48000},
	{MediaFrame::Audio, 1687762798010, 2199005184, 48000},
	{MediaFrame::Video, 1687762798010, 4123134133, 90000},
	{MediaFrame::Video, 1687762798020, 4123137136, 90000},
	{MediaFrame::Video, 1687762798059, 4123140139, 90000},
	{MediaFrame::Video, 1687762798089, 4123143142, 90000},
	{MediaFrame::Video, 1687762798134, 4123146145, 90000},
	{MediaFrame::Audio, 1687762798154, 2199006208, 48000},
	{MediaFrame::Audio, 1687762798154, 2199007232, 48000},
	{MediaFrame::Audio, 1687762798155, 2199008256, 48000},
	{MediaFrame::Audio, 1687762798155, 2199009280, 48000},
	{MediaFrame::Audio, 1687762798155, 2199010304, 48000},
	{MediaFrame::Audio, 1687762798155, 2199011328, 48000},
	{MediaFrame::Audio, 1687762798155, 2199012352, 48000},
	{MediaFrame::Audio, 1687762798174, 2199013376, 48000},
	{MediaFrame::Video, 1687762798174, 4123149148, 90000},
	{MediaFrame::Video, 1687762798194, 4123152151, 90000},
	{MediaFrame::Video, 1687762798234, 4123155154, 90000},
	{MediaFrame::Video, 1687762798254, 4123158157, 90000},
	{MediaFrame::Video, 1687762798302, 4123161160, 90000},
	{MediaFrame::Video, 1687762798332, 4123164163, 90000},
	{MediaFrame::Audio, 1687762798353, 2199014400, 48000},
	{MediaFrame::Audio, 1687762798353, 2199015424, 48000},
	{MediaFrame::Audio, 1687762798353, 2199016448, 48000},
	{MediaFrame::Audio, 1687762798353, 2199017472, 48000},
	{MediaFrame::Audio, 1687762798353, 2199018496, 48000},
	{MediaFrame::Audio, 1687762798362, 2199019520, 48000},
	{MediaFrame::Audio, 1687762798362, 2199020544, 48000},
	{MediaFrame::Audio, 1687762798362, 2199021568, 48000},
	{MediaFrame::Video, 1687762798362, 4123167166, 90000},
	{MediaFrame::Video, 1687762798392, 4123170169, 90000},
	{MediaFrame::Video, 1687762798422, 4123173172, 90000},
	{MediaFrame::Video, 1687762798472, 4123176175, 90000},
	{MediaFrame::Video, 1687762798493, 4123179178, 90000},
	{MediaFrame::Audio, 1687762798523, 2199022592, 48000},
	{MediaFrame::Audio, 1687762798523, 2199023616, 48000},
	{MediaFrame::Audio, 1687762798523, 2199024640, 48000},
	{MediaFrame::Audio, 1687762798523, 2199025664, 48000},
	{MediaFrame::Audio, 1687762798523, 2199026688, 48000},
	{MediaFrame::Audio, 1687762798523, 2199027712, 48000},
	{MediaFrame::Audio, 1687762798523, 2199028736, 48000},
	{MediaFrame::Audio, 1687762798534, 2199029760, 48000},
	{MediaFrame::Video, 1687762798534, 4123182181, 90000},
	{MediaFrame::Video, 1687762798551, 4123185184, 90000},
	{MediaFrame::Video, 1687762798592, 4123188187, 90000},
	{MediaFrame::Video, 1687762798623, 4123191209, 90000},
	{MediaFrame::Video, 1687762798663, 4123194193, 90000},
	{MediaFrame::Audio, 1687762798692, 2199030784, 48000},
	{MediaFrame::Audio, 1687762798692, 2199031808, 48000},
	{MediaFrame::Audio, 1687762798692, 2199032832, 48000},
	{MediaFrame::Audio, 1687762798692, 2199033856, 48000},
	{MediaFrame::Audio, 1687762798692, 2199034880, 48000},
	{MediaFrame::Audio, 1687762798692, 2199035904, 48000},
	{MediaFrame::Audio, 1687762798692, 2199036928, 48000},
	{MediaFrame::Audio, 1687762798692, 2199037952, 48000},
	{MediaFrame::Video, 1687762798702, 4123197196, 90000},
	{MediaFrame::Video, 1687762798719, 4123200199, 90000},
	{MediaFrame::Video, 1687762798770, 4123203202, 90000},
	{MediaFrame::Video, 1687762798790, 4123206205, 90000},
	{MediaFrame::Video, 1687762798830, 4123209208, 90000},
	{MediaFrame::Audio, 1687762798850, 2199038976, 48000},
	{MediaFrame::Audio, 1687762798850, 2199040000, 48000},
	{MediaFrame::Audio, 1687762798850, 2199041024, 48000},
	{MediaFrame::Audio, 1687762798850, 2199042048, 48000},
	{MediaFrame::Audio, 1687762798850, 2199043072, 48000},
	{MediaFrame::Audio, 1687762798850, 2199044096, 48000},
	{MediaFrame::Audio, 1687762798850, 2199045120, 48000},
	{MediaFrame::Audio, 1687762798850, 2199046144, 48000},
	{MediaFrame::Video, 1687762798850, 4123212211, 90000},
	{MediaFrame::Video, 1687762798891, 4123215214, 90000},
	{MediaFrame::Video, 1687762798922, 4123218217, 90000},
	{MediaFrame::Video, 1687762798962, 4123221220, 90000},
	{MediaFrame::Video, 1687762799003, 4123224223, 90000},
	{MediaFrame::Audio, 1687762799023, 2199047168, 48000},
	{MediaFrame::Audio, 1687762799023, 2199048192, 48000},
	{MediaFrame::Audio, 1687762799023, 2199049216, 48000},
	{MediaFrame::Audio, 1687762799023, 2199050240, 48000},
	{MediaFrame::Audio, 1687762799024, 2199051264, 48000},
	{MediaFrame::Audio, 1687762799024, 2199052288, 48000},
	{MediaFrame::Audio, 1687762799024, 2199053312, 48000},
	{MediaFrame::Audio, 1687762799024, 2199054336, 48000},
	{MediaFrame::Video, 1687762799024, 4123227226, 90000},
	{MediaFrame::Video, 1687762799064, 4123230229, 90000},
	{MediaFrame::Video, 1687762799095, 4123233232, 90000},
	{MediaFrame::Video, 1687762799135, 4123236235, 90000},
	{MediaFrame::Video, 1687762799156, 4123239238, 90000},
	{MediaFrame::Audio, 1687762799196, 2199055360, 48000},
	{MediaFrame::Audio, 1687762799196, 2199056384, 48000},
	{MediaFrame::Audio, 1687762799196, 2199057408, 48000},
	{MediaFrame::Audio, 1687762799196, 2199058432, 48000},
	{MediaFrame::Audio, 1687762799196, 2199059456, 48000},
	{MediaFrame::Audio, 1687762799197, 2199060480, 48000},
	{MediaFrame::Audio, 1687762799197, 2199061504, 48000},
	{MediaFrame::Audio, 1687762799197, 2199062528, 48000},
	{MediaFrame::Video, 1687762799197, 4123242241, 90000},
	{MediaFrame::Video, 1687762799234, 4123245244, 90000},
	{MediaFrame::Video, 1687762799264, 4123248247, 90000},
	{MediaFrame::Video, 1687762799305, 4123251250, 90000},
	{MediaFrame::Video, 1687762799325, 4123254253, 90000},
	{MediaFrame::Audio, 1687762799356, 2199063552, 48000},
	{MediaFrame::Audio, 1687762799356, 2199064576, 48000},
	{MediaFrame::Audio, 1687762799356, 2199065600, 48000},
	{MediaFrame::Audio, 1687762799356, 2199066624, 48000},
	{MediaFrame::Audio, 1687762799356, 2199067648, 48000},
	{MediaFrame::Audio, 1687762799356, 2199068672, 48000},
	{MediaFrame::Audio, 1687762799356, 2199069696, 48000},
	{MediaFrame::Audio, 1687762799365, 2199070720, 48000},
	{MediaFrame::Video, 1687762799366, 4123257256, 90000},
	{MediaFrame::Video, 1687762799394, 4123260259, 90000},
	{MediaFrame::Video, 1687762799433, 4123263262, 90000},
	{MediaFrame::Video, 1687762799474, 4123266265, 90000},
	{MediaFrame::Video, 1687762799494, 4123269268, 90000},
	{MediaFrame::Audio, 1687762799524, 2199071744, 48000},
	{MediaFrame::Audio, 1687762799524, 2199072768, 48000},
	{MediaFrame::Audio, 1687762799524, 2199073792, 48000},
	{MediaFrame::Audio, 1687762799524, 2199074816, 48000},
	{MediaFrame::Audio, 1687762799524, 2199075840, 48000},
	{MediaFrame::Audio, 1687762799533, 2199076864, 48000},
	{MediaFrame::Audio, 1687762799534, 2199077888, 48000},
	{MediaFrame::Audio, 1687762799534, 2199078912, 48000},
	{MediaFrame::Video, 1687762799534, 4123272272, 90000},
	{MediaFrame::Video, 1687762799554, 4123275274, 90000},
	{MediaFrame::Video, 1687762799605, 4123278277, 90000},
	{MediaFrame::Video, 1687762799625, 4123281280, 90000},
	{MediaFrame::Video, 1687762799666, 4123284284, 90000},
	{MediaFrame::Video, 1687762799697, 4123287286, 90000},
	{MediaFrame::Audio, 1687762799727, 2199079936, 48000},
	{MediaFrame::Audio, 1687762799727, 2199080960, 48000},
	{MediaFrame::Audio, 1687762799727, 2199081984, 48000},
	{MediaFrame::Audio, 1687762799727, 2199083008, 48000},
	{MediaFrame::Audio, 1687762799727, 2199084032, 48000},
	{MediaFrame::Audio, 1687762799727, 2199085056, 48000},
	{MediaFrame::Audio, 1687762799727, 2199086080, 48000},
	{MediaFrame::Audio, 1687762799737, 2199087104, 48000},
	{MediaFrame::Video, 1687762799737, 4123290289, 90000},
	{MediaFrame::Video, 1687762799774, 4123293292, 90000},
	{MediaFrame::Video, 1687762799794, 4123296295, 90000},
	{MediaFrame::Video, 1687762799834, 4123299299, 90000},
	{MediaFrame::Video, 1687762799874, 4123302301, 90000},
	{MediaFrame::Audio, 1687762799894, 2199088128, 48000},
	{MediaFrame::Audio, 1687762799894, 2199089152, 48000},
	{MediaFrame::Audio, 1687762799894, 2199090176, 48000},
	{MediaFrame::Audio, 1687762799894, 2199091200, 48000},
	{MediaFrame::Audio, 1687762799894, 2199092224, 48000},
	{MediaFrame::Audio, 1687762799894, 2199093248, 48000},
	{MediaFrame::Audio, 1687762799894, 2199094272, 48000},
	{MediaFrame::Audio, 1687762799904, 2199095296, 48000},
	{MediaFrame::Video, 1687762799904, 4123305304, 90000},
	{MediaFrame::Video, 1687762799925, 4123308332, 90000},
	{MediaFrame::Video, 1687762799965, 4123311310, 90000},
	{MediaFrame::Video, 1687762800006, 4123314313, 90000},
	{MediaFrame::Video, 1687762800027, 4123317316, 90000},
	{MediaFrame::Audio, 1687762800067, 2199096320, 48000},
	{MediaFrame::Audio, 1687762800067, 2199097344, 48000},
	{MediaFrame::Audio, 1687762800067, 2199098368, 48000},
	{MediaFrame::Audio, 1687762800067, 2199099392, 48000},
	{MediaFrame::Audio, 1687762800067, 2199100416, 48000},
	{MediaFrame::Audio, 1687762800067, 2199101440, 48000},
	{MediaFrame::Audio, 1687762800067, 2199102464, 48000},
	{MediaFrame::Audio, 1687762800077, 2199103488, 48000},
	{MediaFrame::Video, 1687762800077, 4123320319, 90000},
	{MediaFrame::Video, 1687762800094, 4123323322, 90000},
	{MediaFrame::Video, 1687762800134, 4123326325, 90000},
	{MediaFrame::Video, 1687762800162, 4123329328, 90000},
	{MediaFrame::Video, 1687762800192, 4123332331, 90000},
	{MediaFrame::Audio, 1687762800223, 2199104512, 48000},
	{MediaFrame::Audio, 1687762800223, 2199105536, 48000},
	{MediaFrame::Audio, 1687762800223, 2199106560, 48000},
	{MediaFrame::Audio, 1687762800223, 2199107584, 48000},
	{MediaFrame::Audio, 1687762800223, 2199108608, 48000},
	{MediaFrame::Audio, 1687762800223, 2199109632, 48000},
	{MediaFrame::Audio, 1687762800223, 2199110656, 48000},
	{MediaFrame::Audio, 1687762800223, 2199111680, 48000},
	{MediaFrame::Video, 1687762800223, 4123335335, 90000},
	{MediaFrame::Video, 1687762800264, 4123338337, 90000},
	{MediaFrame::Video, 1687762800302, 4123341340, 90000},
	{MediaFrame::Video, 1687762800322, 4123344343, 90000},
	{MediaFrame::Video, 1687762800372, 4123347346, 90000},
	{MediaFrame::Audio, 1687762800393, 2199112704, 48000},
	{MediaFrame::Audio, 1687762800393, 2199113728, 48000},
	{MediaFrame::Audio, 1687762800393, 2199114752, 48000},
	{MediaFrame::Audio, 1687762800393, 2199115776, 48000},
	{MediaFrame::Audio, 1687762800393, 2199116800, 48000},
	{MediaFrame::Audio, 1687762800393, 2199117824, 48000},
	{MediaFrame::Audio, 1687762800393, 2199118848, 48000},
	{MediaFrame::Audio, 1687762800393, 2199119872, 48000},
	{MediaFrame::Video, 1687762800393, 4123350349, 90000},
	{MediaFrame::Video, 1687762800433, 4123353353, 90000},
	{MediaFrame::Video, 1687762800464, 4123356355, 90000},
	{MediaFrame::Video, 1687762800495, 4123359358, 90000},
	{MediaFrame::Video, 1687762800546, 4123362362, 90000},
	{MediaFrame::Audio, 1687762800566, 2199120896, 48000},
	{MediaFrame::Audio, 1687762800566, 2199121920, 48000},
	{MediaFrame::Audio, 1687762800566, 2199122944, 48000},
	{MediaFrame::Audio, 1687762800566, 2199123968, 48000},
	{MediaFrame::Audio, 1687762800566, 2199124992, 48000},
	{MediaFrame::Audio, 1687762800566, 2199126016, 48000},
	{MediaFrame::Audio, 1687762800566, 2199127040, 48000},
	{MediaFrame::Audio, 1687762800566, 2199128064, 48000},
	{MediaFrame::Video, 1687762800566, 4123365365, 90000},
	{MediaFrame::Video, 1687762800602, 4123368367, 90000},
	{MediaFrame::Video, 1687762800622, 4123371371, 90000},
	{MediaFrame::Video, 1687762800662, 4123374374, 90000},
	{MediaFrame::Video, 1687762800692, 4123377376, 90000},
	{MediaFrame::Audio, 1687762800723, 2199129088, 48000},
	{MediaFrame::Audio, 1687762800723, 2199130112, 48000},
	{MediaFrame::Audio, 1687762800723, 2199131136, 48000},
	{MediaFrame::Audio, 1687762800723, 2199132160, 48000},
	{MediaFrame::Audio, 1687762800723, 2199133184, 48000},
	{MediaFrame::Audio, 1687762800723, 2199134208, 48000},
	{MediaFrame::Audio, 1687762800723, 2199135232, 48000},
	{MediaFrame::Audio, 1687762800733, 2199136256, 48000},
	{MediaFrame::Video, 1687762800733, 4123380380, 90000},
	{MediaFrame::Video, 1687762800773, 4123383383, 90000},
	{MediaFrame::Video, 1687762800794, 4123386386, 90000},
	{MediaFrame::Video, 1687762800835, 4123389389, 90000},
	{MediaFrame::Video, 1687762800862, 4123392392, 90000},
	{MediaFrame::Audio, 1687762800890, 2199137280, 48000},
	{MediaFrame::Audio, 1687762800890, 2199138304, 48000},
	{MediaFrame::Audio, 1687762800891, 2199139328, 48000},
	{MediaFrame::Audio, 1687762800891, 2199140352, 48000},
	{MediaFrame::Audio, 1687762800891, 2199141376, 48000},
	{MediaFrame::Audio, 1687762800891, 2199142400, 48000},
	{MediaFrame::Audio, 1687762800901, 2199143424, 48000},
	{MediaFrame::Audio, 1687762800901, 2199144448, 48000},
	{MediaFrame::Video, 1687762800901, 4123395395, 90000},
	{MediaFrame::Video, 1687762800942, 4123398398, 90000},
	{MediaFrame::Video, 1687762800959, 4123401401, 90000},
	{MediaFrame::Video, 1687762800989, 4123404404, 90000},
	{MediaFrame::Video, 1687762801029, 4123407407, 90000},
	{MediaFrame::Audio, 1687762801059, 2199145472, 48000},
	{MediaFrame::Audio, 1687762801059, 2199146496, 48000},
	{MediaFrame::Audio, 1687762801059, 2199147520, 48000},
	{MediaFrame::Audio, 1687762801059, 2199148544, 48000},
	{MediaFrame::Audio, 1687762801059, 2199149568, 48000},
	{MediaFrame::Audio, 1687762801059, 2199150592, 48000},
	{MediaFrame::Audio, 1687762801059, 2199151616, 48000},
	{MediaFrame::Audio, 1687762801079, 2199152640, 48000},
	{MediaFrame::Video, 1687762801079, 4123410410, 90000},
	{MediaFrame::Video, 1687762801089, 4123413413, 90000},
	{MediaFrame::Video, 1687762801129, 4123416416, 90000},
	{MediaFrame::Video, 1687762801164, 4123419419, 90000},
	{MediaFrame::Video, 1687762801202, 4123422422, 90000},
	{MediaFrame::Video, 1687762801222, 4123425450, 90000},
	{MediaFrame::Audio, 1687762801261, 2199153664, 48000},
	{MediaFrame::Audio, 1687762801262, 2199154688, 48000},
	{MediaFrame::Audio, 1687762801262, 2199155712, 48000},
	{MediaFrame::Audio, 1687762801262, 2199156736, 48000},
	{MediaFrame::Audio, 1687762801262, 2199157760, 48000},
	{MediaFrame::Audio, 1687762801262, 2199158784, 48000},
	{MediaFrame::Audio, 1687762801262, 2199159808, 48000},
	{MediaFrame::Audio, 1687762801262, 2199160832, 48000},
	{MediaFrame::Video, 1687762801262, 4123428428, 90000},
	{MediaFrame::Video, 1687762801302, 4123431431, 90000},
	{MediaFrame::Video, 1687762801332, 4123434434, 90000},
	{MediaFrame::Video, 1687762801373, 4123437437, 90000},
	{MediaFrame::Video, 1687762801393, 4123440440, 90000},
	{MediaFrame::Audio, 1687762801424, 2199161856, 48000},
	{MediaFrame::Audio, 1687762801424, 2199162880, 48000},
	{MediaFrame::Audio, 1687762801424, 2199163904, 48000},
	{MediaFrame::Audio, 1687762801424, 2199164928, 48000},
	{MediaFrame::Audio, 1687762801424, 2199165952, 48000},
	{MediaFrame::Audio, 1687762801433, 2199166976, 48000},
	{MediaFrame::Audio, 1687762801433, 2199168000, 48000},
	{MediaFrame::Audio, 1687762801433, 2199169024, 48000},
	{MediaFrame::Video, 1687762801433, 4123443443, 90000},
	{MediaFrame::Video, 1687762801502, 4123449449, 90000},
	{MediaFrame::Video, 1687762801522, 4123452452, 90000},
	{MediaFrame::Video, 1687762801563, 4123455455, 90000},
	{MediaFrame::Audio, 1687762801594, 2199170048, 48000},
	{MediaFrame::Audio, 1687762801594, 2199171072, 48000},
	{MediaFrame::Audio, 1687762801594, 2199172096, 48000},
	{MediaFrame::Audio, 1687762801594, 2199173120, 48000},
	{MediaFrame::Audio, 1687762801594, 2199174144, 48000},
	{MediaFrame::Audio, 1687762801594, 2199175168, 48000},
	{MediaFrame::Audio, 1687762801602, 2199176192, 48000},
	{MediaFrame::Audio, 1687762801602, 2199177216, 48000},
	{MediaFrame::Video, 1687762801602, 4123458458, 90000},
	{MediaFrame::Video, 1687762801620, 4123461461, 90000},
	{MediaFrame::Video, 1687762801670, 4123464464, 90000},
	{MediaFrame::Video, 1687762801691, 4123467467, 90000},
	{MediaFrame::Audio, 1687762801721, 2199178240, 48000},
	{MediaFrame::Audio, 1687762801721, 2199179264, 48000},
	{MediaFrame::Audio, 1687762801721, 2199180288, 48000},
	{MediaFrame::Audio, 1687762801721, 2199181312, 48000},
	{MediaFrame::Audio, 1687762801731, 2199182336, 48000},
	{MediaFrame::Audio, 1687762801732, 2199183360, 48000},
	{MediaFrame::Audio, 1687762801732, 2199184384, 48000},
	{MediaFrame::Video, 1687762801732, 4123470470, 90000},
	{MediaFrame::Video, 1687762801760, 4123473473, 90000},
	{MediaFrame::Video, 1687762801790, 4123476476, 90000},
	{MediaFrame::Video, 1687762801841, 4123479479, 90000},
	{MediaFrame::Video, 1687762801859, 4123482482, 90000},
	{MediaFrame::Audio, 1687762801889, 2199185408, 48000},
	{MediaFrame::Audio, 1687762801889, 2199186432, 48000},
	{MediaFrame::Audio, 1687762801889, 2199187456, 48000},
	{MediaFrame::Audio, 1687762801889, 2199188480, 48000},
	{MediaFrame::Audio, 1687762801889, 2199189504, 48000},
	{MediaFrame::Audio, 1687762801890, 2199190528, 48000},
	{MediaFrame::Audio, 1687762801900, 2199191552, 48000},
	{MediaFrame::Audio, 1687762801900, 2199192576, 48000},
	{MediaFrame::Video, 1687762801900, 4123485485, 90000},
	{MediaFrame::Video, 1687762801920, 4123488488, 90000},
	{MediaFrame::Video, 1687762801971, 4123491491, 90000},
	{MediaFrame::Video, 1687762801992, 4123494494, 90000},
	{MediaFrame::Video, 1687762802032, 4123497497, 90000},
	{MediaFrame::Audio, 1687762802063, 2199193600, 48000},
	{MediaFrame::Audio, 1687762802063, 2199194624, 48000},
	{MediaFrame::Audio, 1687762802063, 2199195648, 48000},
	{MediaFrame::Audio, 1687762802063, 2199196672, 48000},
	{MediaFrame::Audio, 1687762802063, 2199197696, 48000},
	{MediaFrame::Audio, 1687762802063, 2199198720, 48000},
	{MediaFrame::Audio, 1687762802063, 2199199744, 48000},
	{MediaFrame::Audio, 1687762802073, 2199200768, 48000},
	{MediaFrame::Video, 1687762802073, 4123500500, 90000},
	{MediaFrame::Video, 1687762802093, 4123503503, 90000},
	{MediaFrame::Video, 1687762802144, 4123506506, 90000},
	{MediaFrame::Video, 1687762802165, 4123509509, 90000},
	{MediaFrame::Video, 1687762802205, 4123512512, 90000},
	{MediaFrame::Video, 1687762802226, 4123515515, 90000},
	{MediaFrame::Audio, 1687762802267, 2199201792, 48000},
	{MediaFrame::Audio, 1687762802267, 2199202816, 48000},
	{MediaFrame::Audio, 1687762802267, 2199203840, 48000},
	{MediaFrame::Audio, 1687762802267, 2199204864, 48000},
	{MediaFrame::Audio, 1687762802267, 2199205888, 48000},
	{MediaFrame::Audio, 1687762802267, 2199206912, 48000},
	{MediaFrame::Audio, 1687762802267, 2199207936, 48000},
	{MediaFrame::Audio, 1687762802267, 2199208960, 48000},
	{MediaFrame::Video, 1687762802267, 4123518518, 90000},
	{MediaFrame::Video, 1687762802297, 4123521521, 90000},
	{MediaFrame::Video, 1687762802338, 4123524524, 90000},
	{MediaFrame::Video, 1687762802374, 4123527527, 90000},
	{MediaFrame::Video, 1687762802394, 4123530530, 90000},
	{MediaFrame::Audio, 1687762802424, 2199209984, 48000},
	{MediaFrame::Audio, 1687762802424, 2199211008, 48000},
	{MediaFrame::Audio, 1687762802425, 2199212032, 48000},
	{MediaFrame::Audio, 1687762802425, 2199213056, 48000},
	{MediaFrame::Audio, 1687762802425, 2199214080, 48000},
	{MediaFrame::Audio, 1687762802425, 2199215104, 48000},
	{MediaFrame::Audio, 1687762802425, 2199216128, 48000},
	{MediaFrame::Audio, 1687762802429, 2199217152, 48000},
	{MediaFrame::Video, 1687762802429, 4123533533, 90000},
	{MediaFrame::Video, 1687762802459, 4123536536, 90000},
	{MediaFrame::Video, 1687762802502, 4123539539, 90000},
	{MediaFrame::Video, 1687762802522, 4123542567, 90000},
	{MediaFrame::Video, 1687762802563, 4123545545, 90000},
	{MediaFrame::Audio, 1687762802593, 2199218176, 48000},
	{MediaFrame::Audio, 1687762802593, 2199219200, 48000},
	{MediaFrame::Audio, 1687762802594, 2199220224, 48000},
	{MediaFrame::Audio, 1687762802594, 2199221248, 48000},
	{MediaFrame::Audio, 1687762802594, 2199222272, 48000},
	{MediaFrame::Audio, 1687762802594, 2199223296, 48000},
	{MediaFrame::Audio, 1687762802594, 2199224320, 48000},
	{MediaFrame::Audio, 1687762802594, 2199225344, 48000},
	{MediaFrame::Video, 1687762802614, 4123548548, 90000},
	{MediaFrame::Video, 1687762802634, 4123551551, 90000},
	{MediaFrame::Video, 1687762802675, 4123554554, 90000},
	{MediaFrame::Video, 1687762802694, 4123557557, 90000},
	{MediaFrame::Video, 1687762802733, 4123560560, 90000},
	{MediaFrame::Audio, 1687762802764, 2199226368, 48000},
	{MediaFrame::Audio, 1687762802764, 2199227392, 48000},
	{MediaFrame::Audio, 1687762802764, 2199228416, 48000},
	{MediaFrame::Audio, 1687762802764, 2199229440, 48000},
	{MediaFrame::Audio, 1687762802764, 2199230464, 48000},
	{MediaFrame::Audio, 1687762802764, 2199231488, 48000},
	{MediaFrame::Audio, 1687762802764, 2199232512, 48000},
	{MediaFrame::Audio, 1687762802764, 2199233536, 48000},
	{MediaFrame::Video, 1687762802764, 4123563563, 90000},
	{MediaFrame::Video, 1687762802805, 4123566566, 90000},
	{MediaFrame::Video, 1687762802825, 4123569569, 90000},
	{MediaFrame::Video, 1687762802876, 4123572572, 90000},
	{MediaFrame::Video, 1687762802907, 4123575575, 90000},
	{MediaFrame::Audio, 1687762802927, 2199234560, 48000},
	{MediaFrame::Audio, 1687762802927, 2199235584, 48000},
	{MediaFrame::Audio, 1687762802927, 2199236608, 48000},
	{MediaFrame::Audio, 1687762802927, 2199237632, 48000},
	{MediaFrame::Audio, 1687762802927, 2199238656, 48000},
	{MediaFrame::Audio, 1687762802933, 2199239680, 48000},
	{MediaFrame::Audio, 1687762802934, 2199240704, 48000},
	{MediaFrame::Audio, 1687762802934, 2199241728, 48000},
	{MediaFrame::Video, 1687762802934, 4123578578, 90000},
	{MediaFrame::Video, 1687762802974, 4123581581, 90000},
	{MediaFrame::Video, 1687762802994, 4123584584, 90000},
	{MediaFrame::Video, 1687762803034, 4123587587, 90000},
	{MediaFrame::Video, 1687762803064, 4123590590, 90000},
	{MediaFrame::Audio, 1687762803094, 2199242752, 48000},
	{MediaFrame::Audio, 1687762803094, 2199243776, 48000},
	{MediaFrame::Audio, 1687762803094, 2199244800, 48000},
	{MediaFrame::Audio, 1687762803094, 2199245824, 48000},
	{MediaFrame::Audio, 1687762803094, 2199246848, 48000},
	{MediaFrame::Audio, 1687762803094, 2199247872, 48000},
	{MediaFrame::Audio, 1687762803104, 2199248896, 48000},
	{MediaFrame::Audio, 1687762803104, 2199249920, 48000},
	{MediaFrame::Video, 1687762803104, 4123593593, 90000},
	{MediaFrame::Video, 1687762803144, 4123596596, 90000},
	{MediaFrame::Video, 1687762803165, 4123599599, 90000},
	{MediaFrame::Video, 1687762803216, 4123602602, 90000},
	{MediaFrame::Video, 1687762803233, 4123605605, 90000},
	{MediaFrame::Audio, 1687762803264, 2199250944, 48000},
	{MediaFrame::Audio, 1687762803264, 2199251968, 48000},
	{MediaFrame::Audio, 1687762803264, 2199252992, 48000},
	{MediaFrame::Audio, 1687762803264, 2199254016, 48000},
	{MediaFrame::Audio, 1687762803264, 2199255040, 48000},
	{MediaFrame::Audio, 1687762803273, 2199256064, 48000},
	{MediaFrame::Audio, 1687762803274, 2199257088, 48000},
	{MediaFrame::Video, 1687762803274, 4123608609, 90000},
	{MediaFrame::Video, 1687762803293, 4123611611, 90000},
	{MediaFrame::Video, 1687762803333, 4123614614, 90000},
	{MediaFrame::Video, 1687762803364, 4123617617, 90000},
	{MediaFrame::Audio, 1687762803435, 2199258112, 48000},
	{MediaFrame::Audio, 1687762803435, 2199259136, 48000},
	{MediaFrame::Audio, 1687762803435, 2199260160, 48000},
	{MediaFrame::Audio, 1687762803435, 2199261184, 48000},
	{MediaFrame::Audio, 1687762803435, 2199262208, 48000},
	{MediaFrame::Audio, 1687762803435, 2199263232, 48000},
	{MediaFrame::Audio, 1687762803435, 2199264256, 48000},
	{MediaFrame::Audio, 1687762803441, 2199265280, 48000},
	{MediaFrame::Video, 1687762803441, 4123623623, 90000},
	{MediaFrame::Video, 1687762803461, 4123626626, 90000},
	{MediaFrame::Video, 1687762803505, 4123629629, 90000},
	{MediaFrame::Video, 1687762803533, 4123632632, 90000},
	{MediaFrame::Video, 1687762803573, 4123635635, 90000},
	{MediaFrame::Audio, 1687762803594, 2199266304, 48000},
	{MediaFrame::Audio, 1687762803594, 2199267328, 48000},
	{MediaFrame::Audio, 1687762803594, 2199268352, 48000},
	{MediaFrame::Audio, 1687762803594, 2199269376, 48000},
	{MediaFrame::Audio, 1687762803594, 2199270400, 48000},
	{MediaFrame::Audio, 1687762803594, 2199271424, 48000},
	{MediaFrame::Audio, 1687762803594, 2199272448, 48000},
	{MediaFrame::Audio, 1687762803594, 2199273472, 48000},
	{MediaFrame::Video, 1687762803594, 4123638639, 90000},
	{MediaFrame::Video, 1687762803635, 4123641641, 90000},
	{MediaFrame::Video, 1687762803675, 4123644644, 90000},
	{MediaFrame::Video, 1687762803702, 4123647647, 90000},
	{MediaFrame::Video, 1687762803743, 4123650650, 90000},
	{MediaFrame::Audio, 1687762803763, 2199274496, 48000},
	{MediaFrame::Audio, 1687762803763, 2199275520, 48000},
	{MediaFrame::Audio, 1687762803763, 2199276544, 48000},
	{MediaFrame::Audio, 1687762803763, 2199277568, 48000},
	{MediaFrame::Audio, 1687762803763, 2199278592, 48000},
	{MediaFrame::Audio, 1687762803763, 2199279616, 48000},
	{MediaFrame::Audio, 1687762803763, 2199280640, 48000},
	{MediaFrame::Audio, 1687762803763, 2199281664, 48000},
	{MediaFrame::Video, 1687762803763, 4123653653, 90000},
	{MediaFrame::Video, 1687762803804, 4123656657, 90000},
	{MediaFrame::Video, 1687762803834, 4123659690, 90000},
	{MediaFrame::Video, 1687762803874, 4123662662, 90000},
	{MediaFrame::Video, 1687762803914, 4123665666, 90000},
	{MediaFrame::Audio, 1687762803934, 2199282688, 48000},
	{MediaFrame::Audio, 1687762803934, 2199283712, 48000},
	{MediaFrame::Audio, 1687762803934, 2199284736, 48000},
	{MediaFrame::Audio, 1687762803934, 2199285760, 48000},
	{MediaFrame::Audio, 1687762803934, 2199286784, 48000},
	{MediaFrame::Audio, 1687762803934, 2199287808, 48000},
	{MediaFrame::Audio, 1687762803934, 2199288832, 48000},
	{MediaFrame::Audio, 1687762803934, 2199289856, 48000},
	{MediaFrame::Video, 1687762803934, 4123668669, 90000},
	{MediaFrame::Video, 1687762803974, 4123671672, 90000},
	{MediaFrame::Video, 1687762803993, 4123674674, 90000},
	{MediaFrame::Video, 1687762804034, 4123677677, 90000},
	{MediaFrame::Video, 1687762804065, 4123680680, 90000},
	{MediaFrame::Audio, 1687762804095, 2199290880, 48000},
	{MediaFrame::Audio, 1687762804095, 2199291904, 48000},
	{MediaFrame::Audio, 1687762804095, 2199292928, 48000},
	{MediaFrame::Audio, 1687762804095, 2199293952, 48000},
	{MediaFrame::Audio, 1687762804095, 2199294976, 48000},
	{MediaFrame::Audio, 1687762804095, 2199296000, 48000},
	{MediaFrame::Audio, 1687762804105, 2199297024, 48000},
	{MediaFrame::Audio, 1687762804106, 2199298048, 48000},
	{MediaFrame::Video, 1687762804106, 4123683683, 90000},
	{MediaFrame::Video, 1687762804136, 4123686687, 90000},
	{MediaFrame::Video, 1687762804167, 4123689689, 90000},
	{MediaFrame::Video, 1687762804217, 4123692692, 90000},
	{MediaFrame::Video, 1687762804233, 4123695695, 90000},
	{MediaFrame::Audio, 1687762804264, 2199299072, 48000},
	{MediaFrame::Audio, 1687762804264, 2199300096, 48000},
	{MediaFrame::Audio, 1687762804264, 2199301120, 48000},
	{MediaFrame::Audio, 1687762804264, 2199302144, 48000},
	{MediaFrame::Audio, 1687762804264, 2199303168, 48000},
	{MediaFrame::Audio, 1687762804274, 2199304192, 48000},
	{MediaFrame::Audio, 1687762804274, 2199305216, 48000},
	{MediaFrame::Audio, 1687762804274, 2199306240, 48000},
	{MediaFrame::Video, 1687762804274, 4123698699, 90000},
	{MediaFrame::Video, 1687762804295, 4123701702, 90000},
	{MediaFrame::Video, 1687762804335, 4123704704, 90000},
	{MediaFrame::Video, 1687762804366, 4123707707, 90000},
	{MediaFrame::Video, 1687762804407, 4123710711, 90000},
	{MediaFrame::Audio, 1687762804437, 2199307264, 48000},
	{MediaFrame::Audio, 1687762804437, 2199308288, 48000},
	{MediaFrame::Audio, 1687762804437, 2199309312, 48000},
	{MediaFrame::Audio, 1687762804437, 2199310336, 48000},
	{MediaFrame::Audio, 1687762804437, 2199311360, 48000},
	{MediaFrame::Audio, 1687762804437, 2199312384, 48000},
	{MediaFrame::Audio, 1687762804437, 2199313408, 48000},
	{MediaFrame::Audio, 1687762804437, 2199314432, 48000},
	{MediaFrame::Video, 1687762804448, 4123713714, 90000},
	{MediaFrame::Video, 1687762804468, 4123716716, 90000},
	{MediaFrame::Video, 1687762804509, 4123719719, 90000},
	{MediaFrame::Video, 1687762804539, 4123722722, 90000},
};
}

class TestFrameDispatchCoordinator : public testing::Test, public RTPIncomingMediaStream::Listener
{
public:
	/**
	 * Test dispatching.
	 * 
	 * @param framesInfo	The frame arrival info
	 * @param references 	A vector of reference time and reference timestamps that even used
	 */
	void TestDispatch(const std::vector<std::tuple<MediaFrame::Type, uint64_t, uint64_t, uint32_t>>& framesInfo, 
			std::vector<std::pair<uint64_t, uint64_t>>& references);
	
	virtual void onRTP(const RTPIncomingMediaStream* stream,const RTPPacket::shared& packet) override;
	virtual void onBye(const RTPIncomingMediaStream* stream) override {};
	virtual void onEnded(const RTPIncomingMediaStream* stream) override {};
protected:
	
	/**
	 * Calculate the latencies again the first reference time and timestamps. The negative value
	 * means the references used has a less latency than the first reference (which is basing on 
	 * first frame).
	 */
	std::vector<int64_t> calcLatency(const std::vector<std::pair<uint64_t, uint64_t>>& references);

	std::unique_ptr<FrameDispatchCoordinator> dispatch;
	
	std::vector<RTPPacket::shared> dispatchedPackets;
};

void TestFrameDispatchCoordinator::TestDispatch(const std::vector<std::tuple<MediaFrame::Type, uint64_t, uint64_t, uint32_t>>& framesInfo,
						std::vector<std::pair<uint64_t, uint64_t>>& references)
{
	std::queue<std::pair<RTPPacket::shared, std::chrono::milliseconds>> audioPackets;
	std::queue<std::pair<RTPPacket::shared, std::chrono::milliseconds>> videoPackets;
	
	TestTimeService eventLoop;
	MediaFrameListenerBridge videoBridge(eventLoop, 0);
	MediaFrameListenerBridge audioBridge(eventLoop, 0);
	
	videoBridge.AddListener(this);
	audioBridge.AddListener(this);
	
	// Loop through all frames
	for (auto& f : framesInfo)
	{	
		auto now = std::chrono::milliseconds(std::get<1>(f));
		eventLoop.SetNow(now);	
				
		auto mediaType = std::get<0>(f);
		auto& bridge = mediaType == MediaFrame::Video ? videoBridge : audioBridge;
		
		dispatch->OnFrame(now,
				std::get<2>(f),
				std::get<3>(f),
				bridge);
					
		if (references.empty())
		{
			references.emplace_back(dispatch->refTime.count(), dispatch->refTimestamp);
		}
		else
		{
			auto lastRef = references.back();
			if (lastRef.first != dispatch->refTime.count() || lastRef.second != dispatch->refTimestamp)
			{
				references.emplace_back(dispatch->refTime.count(), dispatch->refTimestamp);
			}
		}
		
		std::unique_ptr<MediaFrame> frame;
		
		if (mediaType == MediaFrame::Video)
		{
			frame = std::make_unique<VideoFrame>(VideoCodec::H264);
		}
		else
		{
			frame = std::make_unique<AudioFrame>(AudioCodec::AAC);
		}
		
		frame->SetTimestamp(std::get<2>(f));
		frame->SetClockRate(std::get<3>(f));
		frame->SetLength(100);
		frame->AddRtpPacket(0, 100);
	
		bridge.onMediaFrame(*frame.get());
	}
	
	eventLoop.SetNow(std::chrono::milliseconds(std::numeric_limits<int64_t>::max()));
}


void TestFrameDispatchCoordinator::onRTP(const RTPIncomingMediaStream* stream,const RTPPacket::shared& packet)
{
	dispatchedPackets.push_back(packet);
}


std::vector<int64_t> TestFrameDispatchCoordinator::calcLatency(const std::vector<std::pair<uint64_t, uint64_t>>& references)
{
	std::vector<int64_t> latencies;
	
	if (references.empty()) return {};
	
	auto& first = references.front();

	for (auto& r : references)
	{
		auto calculatedTimeDiffMs = (r.second - first.second) * 1000 / 90000;
		auto timeDiffMs = r.first - first.first;
		
		latencies.push_back(int64_t(timeDiffMs) - int64_t(calculatedTimeDiffMs));
	}
	
	return latencies;
}

TEST_F(TestFrameDispatchCoordinator, testDispatch)
{
	dispatch = std::make_unique<FrameDispatchCoordinator>();

	std::vector<std::pair<uint64_t, uint64_t>> references;
	ASSERT_NO_FATAL_FAILURE(TestDispatch(TestFramesInfo, references));

	// We set one packet for one frame, so all the frames should been dispatched.
	ASSERT_EQ(TestFramesInfo.size(), dispatchedPackets.size());
	
	auto latencies = calcLatency(references);
	
	std::vector<int64_t> expectedLatencies = {0, 18, 18, 24, 27, 28};
	ASSERT_EQ(expectedLatencies, latencies);
	
	std::vector<std::pair<MediaFrame::Type, uint64_t>> expectedSentPacketsInfo = {
		{ MediaFrame::Audio, 0 },
		{ MediaFrame::Audio, 1920 },
		{ MediaFrame::Audio, 3840 },
		{ MediaFrame::Audio, 5760 },
		{ MediaFrame::Audio, 7680 },
		{ MediaFrame::Audio, 9600 },
		{ MediaFrame::Audio, 11520 },
		{ MediaFrame::Audio, 13440 },
		{ MediaFrame::Audio, 15360 },
		{ MediaFrame::Audio, 17280 },
		{ MediaFrame::Audio, 19200 },
		{ MediaFrame::Audio, 21120 },
		{ MediaFrame::Audio, 23040 },
		{ MediaFrame::Audio, 24960 },
		{ MediaFrame::Audio, 26880 },
		{ MediaFrame::Audio, 28800 },
		{ MediaFrame::Audio, 30720 },
		{ MediaFrame::Audio, 32640 },
		{ MediaFrame::Audio, 34560 },
		{ MediaFrame::Video, 0 },
		{ MediaFrame::Audio, 36480 },
		{ MediaFrame::Video, 3003 },
		{ MediaFrame::Audio, 38400 },
		{ MediaFrame::Audio, 40320 },
		{ MediaFrame::Video, 6006 },
		{ MediaFrame::Audio, 42240 },
		{ MediaFrame::Audio, 44160 },
		{ MediaFrame::Video, 9009 },
		{ MediaFrame::Audio, 46080 },
		{ MediaFrame::Audio, 48000 },
		{ MediaFrame::Video, 12012 },
		{ MediaFrame::Audio, 49920 },
		{ MediaFrame::Audio, 51840 },
		{ MediaFrame::Video, 15015 },
		{ MediaFrame::Audio, 53760 },
		{ MediaFrame::Video, 18018 },
		{ MediaFrame::Audio, 55680 },
		{ MediaFrame::Video, 21021 },
		{ MediaFrame::Audio, 57600 },
		{ MediaFrame::Audio, 59520 },
		{ MediaFrame::Video, 24024 },
		{ MediaFrame::Audio, 61440 },
		{ MediaFrame::Audio, 63360 },
		{ MediaFrame::Video, 27027 },
		{ MediaFrame::Audio, 65280 },
		{ MediaFrame::Video, 30030 },
		{ MediaFrame::Audio, 67200 },
		{ MediaFrame::Audio, 69120 },
		{ MediaFrame::Video, 33033 },
		{ MediaFrame::Audio, 71040 },
		{ MediaFrame::Video, 36036 },
		{ MediaFrame::Audio, 72960 },
		{ MediaFrame::Audio, 74880 },
		{ MediaFrame::Video, 39039 },
		{ MediaFrame::Audio, 76800 },
		{ MediaFrame::Audio, 78720 },
		{ MediaFrame::Video, 42042 },
		{ MediaFrame::Audio, 80640 },
		{ MediaFrame::Video, 45045 },
		{ MediaFrame::Audio, 82560 },
		{ MediaFrame::Audio, 84480 },
		{ MediaFrame::Video, 48048 },
		{ MediaFrame::Audio, 86400 },
		{ MediaFrame::Video, 51051 },
		{ MediaFrame::Audio, 88320 },
		{ MediaFrame::Audio, 90240 },
		{ MediaFrame::Video, 54054 },
		{ MediaFrame::Audio, 92160 },
		{ MediaFrame::Video, 57057 },
		{ MediaFrame::Audio, 94080 },
		{ MediaFrame::Audio, 96000 },
		{ MediaFrame::Video, 60060 },
		{ MediaFrame::Audio, 97920 },
		{ MediaFrame::Video, 63063 },
		{ MediaFrame::Audio, 99840 },
		{ MediaFrame::Audio, 101760 },
		{ MediaFrame::Video, 66066 },
		{ MediaFrame::Audio, 103680 },
		{ MediaFrame::Video, 69069 },
		{ MediaFrame::Audio, 105600 },
		{ MediaFrame::Audio, 107520 },
		{ MediaFrame::Video, 72072 },
		{ MediaFrame::Audio, 109440 },
		{ MediaFrame::Audio, 111360 },
		{ MediaFrame::Video, 75075 },
		{ MediaFrame::Audio, 113280 },
		{ MediaFrame::Video, 78078 },
		{ MediaFrame::Audio, 115200 },
		{ MediaFrame::Audio, 117120 },
		{ MediaFrame::Video, 81081 },
		{ MediaFrame::Audio, 119040 },
		{ MediaFrame::Video, 84084 },
		{ MediaFrame::Audio, 120960 },
		{ MediaFrame::Audio, 122880 },
		{ MediaFrame::Video, 87087 },
		{ MediaFrame::Audio, 124800 },
		{ MediaFrame::Video, 90090 },
		{ MediaFrame::Audio, 126720 },
		{ MediaFrame::Audio, 128640 },
		{ MediaFrame::Video, 93094 },
		{ MediaFrame::Audio, 130560 },
		{ MediaFrame::Audio, 132480 },
		{ MediaFrame::Video, 96096 },
		{ MediaFrame::Audio, 134400 },
		{ MediaFrame::Video, 99099 },
		{ MediaFrame::Audio, 136320 },
		{ MediaFrame::Audio, 138240 },
		{ MediaFrame::Video, 102115 },
		{ MediaFrame::Audio, 140160 },
		{ MediaFrame::Video, 105105 },
		{ MediaFrame::Audio, 142080 },
		{ MediaFrame::Audio, 144000 },
		{ MediaFrame::Video, 108108 },
		{ MediaFrame::Audio, 145920 },
		{ MediaFrame::Video, 111111 },
		{ MediaFrame::Audio, 147840 },
		{ MediaFrame::Audio, 149760 },
		{ MediaFrame::Video, 114115 },
		{ MediaFrame::Audio, 151680 },
		{ MediaFrame::Video, 117117 },
		{ MediaFrame::Audio, 153600 },
		{ MediaFrame::Audio, 155520 },
		{ MediaFrame::Video, 120120 },
		{ MediaFrame::Audio, 157440 },
		{ MediaFrame::Audio, 159360 },
		{ MediaFrame::Video, 123123 },
		{ MediaFrame::Audio, 161280 },
		{ MediaFrame::Video, 126127 },
		{ MediaFrame::Audio, 163200 },
		{ MediaFrame::Audio, 165120 },
		{ MediaFrame::Video, 129130 },
		{ MediaFrame::Audio, 167040 },
		{ MediaFrame::Audio, 168960 },
		{ MediaFrame::Video, 132132 },
		{ MediaFrame::Audio, 170880 },
		{ MediaFrame::Video, 135135 },
		{ MediaFrame::Audio, 172800 },
		{ MediaFrame::Video, 138138 },
		{ MediaFrame::Audio, 174720 },
		{ MediaFrame::Audio, 176640 },
		{ MediaFrame::Video, 141141 },
		{ MediaFrame::Audio, 178560 },
		{ MediaFrame::Audio, 180480 },
		{ MediaFrame::Video, 144144 },
		{ MediaFrame::Audio, 182400 },
		{ MediaFrame::Video, 147147 },
		{ MediaFrame::Audio, 184320 },
		{ MediaFrame::Audio, 186240 },
		{ MediaFrame::Video, 150150 },
		{ MediaFrame::Audio, 188160 },
		{ MediaFrame::Video, 153153 },
		{ MediaFrame::Audio, 190080 },
		{ MediaFrame::Audio, 192000 },
		{ MediaFrame::Video, 156156 },
		{ MediaFrame::Audio, 193920 },
		{ MediaFrame::Audio, 195840 },
		{ MediaFrame::Video, 159159 },
		{ MediaFrame::Audio, 197760 },
		{ MediaFrame::Video, 162162 },
		{ MediaFrame::Audio, 199680 },
		{ MediaFrame::Audio, 201600 },
		{ MediaFrame::Video, 165165 },
		{ MediaFrame::Audio, 203520 },
		{ MediaFrame::Video, 168169 },
		{ MediaFrame::Audio, 205440 },
		{ MediaFrame::Audio, 207360 },
		{ MediaFrame::Video, 171171 },
		{ MediaFrame::Audio, 209280 },
		{ MediaFrame::Video, 174175 },
		{ MediaFrame::Audio, 211200 },
		{ MediaFrame::Audio, 213120 },
		{ MediaFrame::Video, 177178 },
		{ MediaFrame::Audio, 215040 },
		{ MediaFrame::Video, 180180 },
		{ MediaFrame::Audio, 216960 },
		{ MediaFrame::Audio, 218880 },
		{ MediaFrame::Video, 183184 },
		{ MediaFrame::Audio, 220800 },
		{ MediaFrame::Video, 186187 },
		{ MediaFrame::Audio, 222720 },
		{ MediaFrame::Audio, 224640 },
		{ MediaFrame::Video, 189190 },
		{ MediaFrame::Audio, 226560 },
		{ MediaFrame::Audio, 228480 },
		{ MediaFrame::Video, 192193 },
		{ MediaFrame::Audio, 230400 },
		{ MediaFrame::Video, 195196 },
		{ MediaFrame::Audio, 232320 },
		{ MediaFrame::Audio, 234240 },
		{ MediaFrame::Video, 198198 },
		{ MediaFrame::Audio, 236160 },
		{ MediaFrame::Audio, 238080 },
		{ MediaFrame::Video, 201202 },
		{ MediaFrame::Audio, 240000 },
		{ MediaFrame::Video, 204205 },
		{ MediaFrame::Audio, 241920 },
		{ MediaFrame::Video, 207208 },
		{ MediaFrame::Audio, 243840 },
		{ MediaFrame::Audio, 245760 },
		{ MediaFrame::Video, 210211 },
		{ MediaFrame::Audio, 247680 },
		{ MediaFrame::Audio, 249600 },
		{ MediaFrame::Video, 213214 },
		{ MediaFrame::Audio, 251520 },
		{ MediaFrame::Video, 216217 },
		{ MediaFrame::Audio, 253440 },
		{ MediaFrame::Audio, 255360 },
		{ MediaFrame::Video, 219232 },
		{ MediaFrame::Audio, 257280 },
		{ MediaFrame::Video, 222223 },
		{ MediaFrame::Audio, 259200 },
		{ MediaFrame::Audio, 261120 },
		{ MediaFrame::Video, 225226 },
		{ MediaFrame::Audio, 263040 },
		{ MediaFrame::Audio, 264960 },
		{ MediaFrame::Video, 228229 },
		{ MediaFrame::Audio, 266880 },
		{ MediaFrame::Video, 231232 },
		{ MediaFrame::Audio, 268800 },
		{ MediaFrame::Audio, 270720 },
		{ MediaFrame::Video, 234235 },
		{ MediaFrame::Audio, 272640 },
		{ MediaFrame::Video, 237238 },
		{ MediaFrame::Audio, 274560 },
		{ MediaFrame::Audio, 276480 },
		{ MediaFrame::Video, 240241 },
		{ MediaFrame::Audio, 278400 },
		{ MediaFrame::Video, 243244 },
		{ MediaFrame::Audio, 280320 },
		{ MediaFrame::Audio, 282240 },
		{ MediaFrame::Video, 246247 },
		{ MediaFrame::Audio, 284160 },
		{ MediaFrame::Audio, 286080 },
		{ MediaFrame::Video, 249250 },
		{ MediaFrame::Audio, 288000 },
		{ MediaFrame::Video, 252253 },
		{ MediaFrame::Audio, 289920 },
		{ MediaFrame::Audio, 291840 },
		{ MediaFrame::Video, 255256 },
		{ MediaFrame::Audio, 293760 },
		{ MediaFrame::Video, 258259 },
		{ MediaFrame::Audio, 295680 },
		{ MediaFrame::Audio, 297600 },
		{ MediaFrame::Video, 261262 },
		{ MediaFrame::Audio, 299520 },
		{ MediaFrame::Video, 264265 },
		{ MediaFrame::Audio, 301440 },
		{ MediaFrame::Audio, 303360 },
		{ MediaFrame::Video, 267268 },
		{ MediaFrame::Audio, 305280 },
		{ MediaFrame::Video, 270271 },
		{ MediaFrame::Audio, 307200 },
		{ MediaFrame::Audio, 309120 },
		{ MediaFrame::Video, 273274 },
		{ MediaFrame::Audio, 311040 },
		{ MediaFrame::Audio, 312960 },
		{ MediaFrame::Video, 276277 },
		{ MediaFrame::Audio, 314880 },
		{ MediaFrame::Video, 279280 },
		{ MediaFrame::Audio, 316800 },
		{ MediaFrame::Audio, 318720 },
		{ MediaFrame::Video, 282283 },
		{ MediaFrame::Audio, 320640 },
		{ MediaFrame::Video, 285286 },
		{ MediaFrame::Audio, 322560 },
		{ MediaFrame::Audio, 324480 },
		{ MediaFrame::Video, 288289 },
		{ MediaFrame::Audio, 326400 },
		{ MediaFrame::Video, 291292 },
		{ MediaFrame::Audio, 328320 },
		{ MediaFrame::Audio, 330240 },
		{ MediaFrame::Video, 294295 },
		{ MediaFrame::Audio, 332160 },
		{ MediaFrame::Audio, 334080 },
		{ MediaFrame::Video, 297298 },
		{ MediaFrame::Audio, 336000 },
		{ MediaFrame::Video, 300301 },
		{ MediaFrame::Audio, 337920 },
		{ MediaFrame::Audio, 339840 },
		{ MediaFrame::Video, 303304 },
		{ MediaFrame::Audio, 341760 },
		{ MediaFrame::Video, 306307 },
		{ MediaFrame::Audio, 343680 },
		{ MediaFrame::Audio, 345600 },
		{ MediaFrame::Video, 309310 },
		{ MediaFrame::Audio, 347520 },
		{ MediaFrame::Video, 312313 },
		{ MediaFrame::Audio, 349440 },
		{ MediaFrame::Audio, 351360 },
		{ MediaFrame::Video, 315316 },
		{ MediaFrame::Audio, 353280 },
		{ MediaFrame::Video, 318319 },
		{ MediaFrame::Audio, 355200 },
		{ MediaFrame::Audio, 357120 },
		{ MediaFrame::Video, 321322 },
		{ MediaFrame::Audio, 359040 },
		{ MediaFrame::Audio, 360960 },
		{ MediaFrame::Video, 324325 },
		{ MediaFrame::Audio, 362880 },
		{ MediaFrame::Video, 327328 },
		{ MediaFrame::Audio, 364800 },
		{ MediaFrame::Audio, 366720 },
		{ MediaFrame::Video, 330331 },
		{ MediaFrame::Audio, 368640 },
		{ MediaFrame::Video, 333334 },
		{ MediaFrame::Audio, 370560 },
		{ MediaFrame::Audio, 372480 },
		{ MediaFrame::Video, 336356 },
		{ MediaFrame::Audio, 374400 },
		{ MediaFrame::Video, 339340 },
		{ MediaFrame::Audio, 376320 },
		{ MediaFrame::Audio, 378240 },
		{ MediaFrame::Video, 342343 },
		{ MediaFrame::Audio, 380160 },
		{ MediaFrame::Audio, 382080 },
		{ MediaFrame::Video, 345346 },
		{ MediaFrame::Audio, 384000 },
		{ MediaFrame::Video, 348349 },
		{ MediaFrame::Audio, 385920 },
		{ MediaFrame::Audio, 387840 },
		{ MediaFrame::Video, 351352 },
		{ MediaFrame::Audio, 389760 },
		{ MediaFrame::Video, 354355 },
		{ MediaFrame::Audio, 391680 },
		{ MediaFrame::Audio, 393600 },
		{ MediaFrame::Video, 357358 },
		{ MediaFrame::Audio, 395520 },
		{ MediaFrame::Video, 360361 },
		{ MediaFrame::Audio, 397440 },
		{ MediaFrame::Audio, 399360 },
		{ MediaFrame::Video, 363364 },
		{ MediaFrame::Audio, 401280 },
		{ MediaFrame::Video, 366367 },
		{ MediaFrame::Audio, 403200 },
		{ MediaFrame::Audio, 405120 },
		{ MediaFrame::Video, 369370 },
		{ MediaFrame::Audio, 407040 },
		{ MediaFrame::Audio, 408960 },
		{ MediaFrame::Video, 372373 },
		{ MediaFrame::Audio, 410880 },
		{ MediaFrame::Video, 375376 },
		{ MediaFrame::Audio, 412800 },
		{ MediaFrame::Audio, 414720 },
		{ MediaFrame::Video, 378379 },
		{ MediaFrame::Audio, 416640 },
		{ MediaFrame::Video, 381382 },
		{ MediaFrame::Audio, 418560 },
		{ MediaFrame::Audio, 420480 },
		{ MediaFrame::Video, 384385 },
		{ MediaFrame::Audio, 422400 },
		{ MediaFrame::Audio, 424320 },
		{ MediaFrame::Video, 387388 },
		{ MediaFrame::Audio, 426240 },
		{ MediaFrame::Video, 390391 },
		{ MediaFrame::Audio, 428160 },
		{ MediaFrame::Video, 393394 },
		{ MediaFrame::Audio, 430080 },
		{ MediaFrame::Audio, 432000 },
		{ MediaFrame::Video, 396397 },
		{ MediaFrame::Audio, 433920 },
		{ MediaFrame::Audio, 435840 },
		{ MediaFrame::Video, 399400 },
		{ MediaFrame::Audio, 437760 },
		{ MediaFrame::Video, 402403 },
		{ MediaFrame::Audio, 439680 },
		{ MediaFrame::Audio, 441600 },
		{ MediaFrame::Video, 405406 },
		{ MediaFrame::Audio, 443520 },
		{ MediaFrame::Video, 408409 },
		{ MediaFrame::Audio, 445440 },
		{ MediaFrame::Audio, 447360 },
		{ MediaFrame::Video, 411412 },
		{ MediaFrame::Audio, 449280 },
		{ MediaFrame::Audio, 451200 },
		{ MediaFrame::Video, 414415 },
		{ MediaFrame::Audio, 453120 },
		{ MediaFrame::Video, 417419 },
		{ MediaFrame::Audio, 455040 },
		{ MediaFrame::Audio, 456960 },
		{ MediaFrame::Video, 420421 },
		{ MediaFrame::Audio, 458880 },
		{ MediaFrame::Video, 423424 },
		{ MediaFrame::Audio, 460800 },
		{ MediaFrame::Audio, 462720 },
		{ MediaFrame::Video, 426427 },
		{ MediaFrame::Audio, 464640 },
		{ MediaFrame::Video, 429431 },
		{ MediaFrame::Audio, 466560 },
		{ MediaFrame::Audio, 468480 },
		{ MediaFrame::Video, 432433 },
		{ MediaFrame::Audio, 470400 },
		{ MediaFrame::Audio, 472320 },
		{ MediaFrame::Video, 435436 },
		{ MediaFrame::Audio, 474240 },
		{ MediaFrame::Video, 438439 },
		{ MediaFrame::Audio, 476160 },
		{ MediaFrame::Audio, 478080 },
		{ MediaFrame::Video, 441442 },
		{ MediaFrame::Audio, 480000 },
		{ MediaFrame::Video, 444446 },
		{ MediaFrame::Audio, 481920 },
		{ MediaFrame::Audio, 483840 },
		{ MediaFrame::Video, 447448 },
		{ MediaFrame::Audio, 485760 },
		{ MediaFrame::Video, 450451 },
		{ MediaFrame::Audio, 487680 },
		{ MediaFrame::Audio, 489600 },
		{ MediaFrame::Video, 453479 },
		{ MediaFrame::Audio, 491520 },
		{ MediaFrame::Video, 456457 },
		{ MediaFrame::Audio, 493440 },
		{ MediaFrame::Audio, 495360 },
		{ MediaFrame::Video, 459460 },
		{ MediaFrame::Audio, 497280 },
		{ MediaFrame::Audio, 499200 },
		{ MediaFrame::Video, 462463 },
		{ MediaFrame::Audio, 501120 },
		{ MediaFrame::Video, 465466 },
		{ MediaFrame::Audio, 503040 },
		{ MediaFrame::Audio, 504960 },
		{ MediaFrame::Video, 468469 },
		{ MediaFrame::Audio, 506880 },
		{ MediaFrame::Video, 471472 },
		{ MediaFrame::Audio, 508800 },
		{ MediaFrame::Audio, 510720 },
		{ MediaFrame::Video, 474475 },
		{ MediaFrame::Audio, 512640 },
		{ MediaFrame::Video, 477478 },
		{ MediaFrame::Audio, 514560 },
		{ MediaFrame::Audio, 516480 },
		{ MediaFrame::Video, 480482 },
		{ MediaFrame::Audio, 518400 },
		{ MediaFrame::Audio, 520320 },
		{ MediaFrame::Video, 483484 },
		{ MediaFrame::Audio, 522240 },
		{ MediaFrame::Video, 486487 },
		{ MediaFrame::Audio, 524160 },
		{ MediaFrame::Audio, 526080 },
		{ MediaFrame::Video, 489490 },
		{ MediaFrame::Audio, 528000 },
		{ MediaFrame::Video, 492493 },
		{ MediaFrame::Audio, 529920 },
		{ MediaFrame::Audio, 531840 },
		{ MediaFrame::Video, 495496 },
		{ MediaFrame::Audio, 533760 },
		{ MediaFrame::Video, 498500 },
		{ MediaFrame::Audio, 535680 },
		{ MediaFrame::Audio, 537600 },
		{ MediaFrame::Video, 501502 },
		{ MediaFrame::Audio, 539520 },
		{ MediaFrame::Video, 504505 },
		{ MediaFrame::Audio, 541440 },
		{ MediaFrame::Audio, 543360 },
		{ MediaFrame::Video, 507509 },
		{ MediaFrame::Audio, 545280 },
		{ MediaFrame::Audio, 547200 },
		{ MediaFrame::Video, 510512 },
		{ MediaFrame::Audio, 549120 },
		{ MediaFrame::Video, 513514 },
		{ MediaFrame::Audio, 551040 },
		{ MediaFrame::Audio, 552960 },
		{ MediaFrame::Video, 516518 },
		{ MediaFrame::Audio, 554880 },
		{ MediaFrame::Video, 519521 },
		{ MediaFrame::Audio, 556800 },
		{ MediaFrame::Audio, 558720 },
		{ MediaFrame::Video, 522523 },
		{ MediaFrame::Audio, 560640 },
		{ MediaFrame::Video, 525527 },
		{ MediaFrame::Audio, 562560 },
		{ MediaFrame::Audio, 564480 },
		{ MediaFrame::Video, 528530 },
		{ MediaFrame::Audio, 566400 },
		{ MediaFrame::Audio, 568320 },
		{ MediaFrame::Video, 531533 },
		{ MediaFrame::Audio, 570240 },
		{ MediaFrame::Video, 534536 },
		{ MediaFrame::Audio, 572160 },
		{ MediaFrame::Audio, 574080 },
		{ MediaFrame::Video, 537539 },
		{ MediaFrame::Audio, 576000 },
		{ MediaFrame::Video, 540542 },
		{ MediaFrame::Audio, 577920 },
		{ MediaFrame::Audio, 579840 },
		{ MediaFrame::Video, 543545 },
		{ MediaFrame::Audio, 581760 },
		{ MediaFrame::Video, 546548 },
		{ MediaFrame::Audio, 583680 },
		{ MediaFrame::Audio, 585600 },
		{ MediaFrame::Video, 549551 },
		{ MediaFrame::Audio, 587520 },
		{ MediaFrame::Video, 552554 },
		{ MediaFrame::Audio, 589440 },
		{ MediaFrame::Audio, 591360 },
		{ MediaFrame::Video, 555557 },
		{ MediaFrame::Audio, 593280 },
		{ MediaFrame::Audio, 595200 },
		{ MediaFrame::Video, 558560 },
		{ MediaFrame::Audio, 597120 },
		{ MediaFrame::Video, 561563 },
		{ MediaFrame::Audio, 599040 },
		{ MediaFrame::Video, 564566 },
		{ MediaFrame::Audio, 600960 },
		{ MediaFrame::Audio, 602880 },
		{ MediaFrame::Video, 567569 },
		{ MediaFrame::Audio, 604800 },
		{ MediaFrame::Audio, 606720 },
		{ MediaFrame::Video, 570597 },
		{ MediaFrame::Audio, 608640 },
		{ MediaFrame::Video, 573575 },
		{ MediaFrame::Audio, 610560 },
		{ MediaFrame::Audio, 612480 },
		{ MediaFrame::Video, 576578 },
		{ MediaFrame::Audio, 614400 },
		{ MediaFrame::Video, 579581 },
		{ MediaFrame::Audio, 616320 },
		{ MediaFrame::Audio, 618240 },
		{ MediaFrame::Video, 582584 },
		{ MediaFrame::Audio, 620160 },
		{ MediaFrame::Audio, 622080 },
		{ MediaFrame::Video, 585587 },
		{ MediaFrame::Audio, 624000 },
		{ MediaFrame::Video, 588590 },
		{ MediaFrame::Audio, 625920 },
		{ MediaFrame::Audio, 627840 },
		{ MediaFrame::Video, 594596 },
		{ MediaFrame::Audio, 629760 },
		{ MediaFrame::Audio, 631680 },
		{ MediaFrame::Audio, 633600 },
		{ MediaFrame::Video, 597599 },
		{ MediaFrame::Audio, 635520 },
		{ MediaFrame::Audio, 637440 },
		{ MediaFrame::Video, 600602 },
		{ MediaFrame::Audio, 639360 },
		{ MediaFrame::Video, 603605 },
		{ MediaFrame::Audio, 641280 },
		{ MediaFrame::Audio, 643200 },
		{ MediaFrame::Video, 606608 },
		{ MediaFrame::Audio, 645120 },
		{ MediaFrame::Video, 609611 },
		{ MediaFrame::Audio, 647040 },
		{ MediaFrame::Audio, 648960 },
		{ MediaFrame::Video, 612614 },
		{ MediaFrame::Audio, 650880 },
		{ MediaFrame::Video, 615617 },
		{ MediaFrame::Audio, 652800 },
		{ MediaFrame::Audio, 654720 },
		{ MediaFrame::Video, 618620 },
		{ MediaFrame::Audio, 656640 },
		{ MediaFrame::Video, 621623 },
		{ MediaFrame::Audio, 658560 },
		{ MediaFrame::Audio, 660480 },
		{ MediaFrame::Video, 624626 },
		{ MediaFrame::Audio, 662400 },
		{ MediaFrame::Audio, 664320 },
		{ MediaFrame::Video, 627629 },
		{ MediaFrame::Audio, 666240 },
		{ MediaFrame::Video, 630632 },
		{ MediaFrame::Audio, 668160 },
		{ MediaFrame::Audio, 670080 },
		{ MediaFrame::Video, 633635 },
		{ MediaFrame::Audio, 672000 },
		{ MediaFrame::Video, 636638 },
		{ MediaFrame::Audio, 673920 },
		{ MediaFrame::Audio, 675840 },
		{ MediaFrame::Video, 639641 },
		{ MediaFrame::Audio, 677760 },
		{ MediaFrame::Video, 642644 },
		{ MediaFrame::Audio, 679680 },
		{ MediaFrame::Audio, 681600 },
		{ MediaFrame::Video, 645647 },
		{ MediaFrame::Audio, 683520 },
		{ MediaFrame::Video, 648650 },
		{ MediaFrame::Audio, 685440 },
		{ MediaFrame::Audio, 687360 },
		{ MediaFrame::Video, 651653 },
		{ MediaFrame::Audio, 689280 },
		{ MediaFrame::Audio, 691200 },
		{ MediaFrame::Video, 654656 },
		{ MediaFrame::Audio, 693120 },
		{ MediaFrame::Video, 657659 },
		{ MediaFrame::Audio, 695040 },
		{ MediaFrame::Audio, 696960 },
		{ MediaFrame::Video, 660662 },
		{ MediaFrame::Audio, 698880 },
		{ MediaFrame::Video, 663665 },
		{ MediaFrame::Audio, 700800 },
		{ MediaFrame::Audio, 702720 },
		{ MediaFrame::Video, 666668 },
		{ MediaFrame::Audio, 704640 },
		{ MediaFrame::Audio, 706560 },
		{ MediaFrame::Video, 669671 },
		{ MediaFrame::Audio, 708480 },
		{ MediaFrame::Video, 672674 },
		{ MediaFrame::Audio, 710400 },
		{ MediaFrame::Audio, 712320 },
		{ MediaFrame::Video, 675677 },
		{ MediaFrame::Audio, 714240 },
		{ MediaFrame::Video, 678680 },
		{ MediaFrame::Audio, 716160 },
		{ MediaFrame::Audio, 718080 },
		{ MediaFrame::Video, 681683 },
		{ MediaFrame::Audio, 720000 },
		{ MediaFrame::Video, 684686 },
		{ MediaFrame::Audio, 721920 },
		{ MediaFrame::Audio, 723840 },
		{ MediaFrame::Video, 687714 },
		{ MediaFrame::Audio, 725760 },
		{ MediaFrame::Video, 690692 },
		{ MediaFrame::Audio, 727680 },
		{ MediaFrame::Audio, 729600 },
		{ MediaFrame::Video, 693695 },
		{ MediaFrame::Audio, 731520 },
		{ MediaFrame::Audio, 733440 },
		{ MediaFrame::Video, 696698 },
		{ MediaFrame::Audio, 735360 },
		{ MediaFrame::Video, 699701 },
		{ MediaFrame::Audio, 737280 },
		{ MediaFrame::Audio, 739200 },
		{ MediaFrame::Video, 702704 },
		{ MediaFrame::Audio, 741120 },
		{ MediaFrame::Video, 705707 },
		{ MediaFrame::Audio, 743040 },
		{ MediaFrame::Audio, 744960 },
		{ MediaFrame::Video, 708710 },
		{ MediaFrame::Audio, 746880 },
		{ MediaFrame::Video, 711713 },
		{ MediaFrame::Audio, 748800 },
		{ MediaFrame::Audio, 750720 },
		{ MediaFrame::Video, 714716 },
		{ MediaFrame::Audio, 752640 },
		{ MediaFrame::Audio, 754560 },
		{ MediaFrame::Video, 717719 },
		{ MediaFrame::Audio, 756480 },
		{ MediaFrame::Video, 720722 },
		{ MediaFrame::Audio, 758400 },
		{ MediaFrame::Audio, 760320 },
		{ MediaFrame::Video, 723725 },
		{ MediaFrame::Audio, 762240 },
		{ MediaFrame::Video, 726728 },
		{ MediaFrame::Audio, 764160 },
		{ MediaFrame::Audio, 766080 },
		{ MediaFrame::Video, 729731 },
		{ MediaFrame::Audio, 768000 },
		{ MediaFrame::Video, 732734 },
		{ MediaFrame::Audio, 769920 },
		{ MediaFrame::Audio, 771840 },
		{ MediaFrame::Video, 735737 },
		{ MediaFrame::Audio, 773760 },
		{ MediaFrame::Audio, 775680 },
		{ MediaFrame::Video, 738740 },
		{ MediaFrame::Audio, 777600 },
		{ MediaFrame::Video, 741743 },
		{ MediaFrame::Audio, 779520 },
		{ MediaFrame::Audio, 781440 },
		{ MediaFrame::Video, 744746 },
		{ MediaFrame::Audio, 783360 },
		{ MediaFrame::Video, 747749 },
		{ MediaFrame::Audio, 785280 },
		{ MediaFrame::Audio, 787200 },
		{ MediaFrame::Video, 750752 },
		{ MediaFrame::Audio, 789120 },
		{ MediaFrame::Video, 753756 },
		{ MediaFrame::Audio, 791040 },
		{ MediaFrame::Audio, 792960 },
		{ MediaFrame::Video, 756758 },
		{ MediaFrame::Audio, 794880 },
		{ MediaFrame::Video, 759761 },
		{ MediaFrame::Audio, 796800 },
		{ MediaFrame::Audio, 798720 },
		{ MediaFrame::Video, 762764 },
		{ MediaFrame::Audio, 800640 },
		{ MediaFrame::Audio, 802560 },
		{ MediaFrame::Audio, 804480 },
		{ MediaFrame::Video, 768770 },
		{ MediaFrame::Audio, 806400 },
		{ MediaFrame::Audio, 808320 },
		{ MediaFrame::Video, 771773 },
		{ MediaFrame::Audio, 810240 },
		{ MediaFrame::Video, 774776 },
		{ MediaFrame::Audio, 812160 },
		{ MediaFrame::Audio, 814080 },
		{ MediaFrame::Video, 777779 },
		{ MediaFrame::Audio, 816000 },
		{ MediaFrame::Video, 780782 },
		{ MediaFrame::Audio, 817920 },
		{ MediaFrame::Audio, 819840 },
		{ MediaFrame::Video, 783786 },
		{ MediaFrame::Audio, 821760 },
		{ MediaFrame::Video, 786788 },
		{ MediaFrame::Audio, 823680 },
		{ MediaFrame::Audio, 825600 },
		{ MediaFrame::Video, 789791 },
		{ MediaFrame::Audio, 827520 },
		{ MediaFrame::Audio, 829440 },
		{ MediaFrame::Video, 792794 },
		{ MediaFrame::Audio, 831360 },
		{ MediaFrame::Video, 795797 },
		{ MediaFrame::Audio, 833280 },
		{ MediaFrame::Audio, 835200 },
		{ MediaFrame::Video, 798800 },
		{ MediaFrame::Audio, 837120 },
		{ MediaFrame::Video, 801804 },
		{ MediaFrame::Audio, 839040 },
		{ MediaFrame::Audio, 840960 },
		{ MediaFrame::Video, 804837 },
		{ MediaFrame::Audio, 842880 },
		{ MediaFrame::Video, 807809 },
		{ MediaFrame::Audio, 844800 },
		{ MediaFrame::Audio, 846720 },
		{ MediaFrame::Video, 810813 },
		{ MediaFrame::Audio, 848640 },
		{ MediaFrame::Audio, 850560 },
		{ MediaFrame::Video, 813816 },
		{ MediaFrame::Audio, 852480 },
		{ MediaFrame::Video, 816819 },
		{ MediaFrame::Audio, 854400 },
		{ MediaFrame::Audio, 856320 },
		{ MediaFrame::Video, 819821 },
		{ MediaFrame::Audio, 858240 },
		{ MediaFrame::Video, 822824 },
		{ MediaFrame::Audio, 860160 },
		{ MediaFrame::Audio, 862080 },
		{ MediaFrame::Video, 825827 },
		{ MediaFrame::Audio, 864000 },
		{ MediaFrame::Video, 828830 },
		{ MediaFrame::Audio, 865920 },
		{ MediaFrame::Audio, 867840 },
		{ MediaFrame::Video, 831834 },
		{ MediaFrame::Audio, 869760 },
		{ MediaFrame::Audio, 871680 },
		{ MediaFrame::Video, 834836 },
		{ MediaFrame::Audio, 873600 },
		{ MediaFrame::Video, 837839 },
		{ MediaFrame::Audio, 875520 },
		{ MediaFrame::Audio, 877440 },
		{ MediaFrame::Video, 840842 },
		{ MediaFrame::Audio, 879360 },
		{ MediaFrame::Video, 843846 },
		{ MediaFrame::Audio, 881280 },
		{ MediaFrame::Audio, 883200 },
		{ MediaFrame::Video, 846849 },
		{ MediaFrame::Audio, 885120 },
		{ MediaFrame::Video, 849851 },
		{ MediaFrame::Audio, 887040 },
		{ MediaFrame::Audio, 888960 },
		{ MediaFrame::Video, 852854 },
		{ MediaFrame::Audio, 890880 },
		{ MediaFrame::Video, 855858 },
		{ MediaFrame::Audio, 892800 },
		{ MediaFrame::Video, 858861 },
		{ MediaFrame::Audio, 894720 },
		{ MediaFrame::Video, 861863 },
		{ MediaFrame::Audio, 896640 },
		{ MediaFrame::Video, 864866 },
		{ MediaFrame::Video, 867869 }
	};
	
	std::vector<std::pair<MediaFrame::Type, uint64_t>> actualSentPacketsInfo;
	for (auto it : dispatchedPackets)
	{
		actualSentPacketsInfo.emplace_back(it->GetMediaType(), it->GetExtTimestamp());
	}
	
	ASSERT_EQ(expectedSentPacketsInfo, actualSentPacketsInfo);
}

TEST_F(TestFrameDispatchCoordinator, testLatencyReduction)
{	
	dispatch = std::make_unique<FrameDispatchCoordinator>(-100, 0, std::chrono::milliseconds(20));
	std::vector<std::pair<uint64_t, uint64_t>> references;
	ASSERT_NO_FATAL_FAILURE(TestDispatch(TestFramesInfo, references));
	
	// We set one packet for one frame, so all the frames should been dispatched.
	ASSERT_EQ(TestFramesInfo.size(), dispatchedPackets.size());
	
	auto latencies = calcLatency(references);
		
	std::vector<int64_t> expectedLatencies = {
		0, -20, -40, -7, -27, -47, -67, -87, -107, 18, -2, -22, -42, -62, -82, -102, 
		-122, -142, 16, -4, -24, -44, -64, -84, -104, -124, 18, -2, -22, -42, -62, -82, 
		-102, -122, 6, -14, -34, -54, -74, -94, -114, -134, 7, -13, -33, -53, -73, -93, 
		-113, -133, 8, -12, -32, -52, -72, -92, -112, -132, 6, -14, -34, -54, -74, -94, 
		-114, -6, -26, -46, -66, -86, -106, -126, 16, -4, -24, -44, -64, -84, -104, -124, 
		18, -2, -22, -42, -62, -82, -102, -122, 4, -16, -36, -56, -76, -96, -116, -136, 
		7, -13, -33, -53, -73, -93, -113, -133, 24, 4, -16, -36, -56, -76, -96, -116, 
		-136, 12, -8, -28, -48, -68, -88, -108, -128, 14, -6, -26, -46, -66, -86, -106, 
		-126, 12, -8, -28, -48, -68, -88, -108, -128, 4, -16, -36, -56, -76, -96, -116, 
		-136, 0, -20, -40, -60, -80, -100, -120, -3, -23, -43, -63, -83, -103, -123, -143, 
		-135, -10, -30, -50, -70, -90, -110, -130, 18, -2, -22, -42, -62, -82, -102, -122, 
		18, -2, -22, -42, -62, -82, -102, -122, 16, -4, -24, -44, -64, -84, -104, -124, 
		3, -17, -37, -57, -77, -97, -117, -137, -134, 6, -14, -34, -54, -74, -94, -114, 
		-134, 8, -12, -32, -52, -72, -92, -112, -132, -3, -23, -43, -63, -83, -103, -123, 
		-5, -25, -45, -65, -85, -105, -125, 27, 7, -13, -33, -53, -73, -93, -113, 23, 
		3, -17, -37, -57, -77, -97, -117, -137, 26, 6, -14, -34, -54, -74, -94, -114, 
		-134, 11, -9, -29, -49, -69, -89, -109, -129, 10, -10, -30, -50, -70, -90, -110, 
		-130, -126, 13, -7, -27, -47, -67, -87, -107, -127, -1, -21, -41, -61, -81, -101, 
		-121, -5, -25, -45, -65, -85, -105, -125, -145, -143, -6, -26, -46, -66, -86, -106, 
		-126, 25, 5, -15, -35, -55, -75, -95, -115, -135, 17, -3, -23, -43, -63, -83, 
		-103, 17, -3, -23, -43, -63, -83, -103, -123, -27, -47, -67, -87, -107, -127, -147, 
		-8, -28, -48, -68, -88, -108, -128, -5, -25, -45, -65, -85, -105, -125, 28, 8, 
		-12, -32, -52, -72, -92, -112, -132, 15, -5, -25, -45, -65, -85, -105, -125, 13, 
		-7, -27, -47, -67, -87, -107, -127, 13, -7, -27, -47, -67, -87, -107, -127, 6, 
		-14, -34, -54, -74, -94, -114, -134, 2, -18, -38, -58, -78, -98, -118, 1, -19, 
		-39, -59, -79, -99, 23, 3, -17, -37, -57, -77, -97, -117, 11, -9, -29, -49, 
		-69, -89, -109, -129, 10, -10, -30, -50, -70, -90, -110, -130, -128, 10, -10, -30, 
		-50, -70, -90, -110, -130, 0, -20, -40, -60, -80, -100, -120, -1, -21, -41, -61, 
		-81, -101, -121, 1, -19, -39, -59, -79, -99, -119
	};

	ASSERT_EQ(expectedLatencies, latencies);
	
	std::vector<std::pair<MediaFrame::Type, uint64_t>> expectedSentPacketsInfo = {
		{ MediaFrame::Audio, 0 },
		{ MediaFrame::Audio, 1920 },
		{ MediaFrame::Audio, 3840 },
		{ MediaFrame::Audio, 5760 },
		{ MediaFrame::Audio, 7680 },
		{ MediaFrame::Audio, 9600 },
		{ MediaFrame::Audio, 11520 },
		{ MediaFrame::Audio, 13440 },
		{ MediaFrame::Audio, 15360 },
		{ MediaFrame::Audio, 17280 },
		{ MediaFrame::Audio, 19200 },
		{ MediaFrame::Audio, 21120 },
		{ MediaFrame::Audio, 23040 },
		{ MediaFrame::Audio, 24960 },
		{ MediaFrame::Audio, 26880 },
		{ MediaFrame::Audio, 28800 },
		{ MediaFrame::Video, 0 },
		{ MediaFrame::Video, 3003 },
		{ MediaFrame::Audio, 30720 },
		{ MediaFrame::Video, 6006 },
		{ MediaFrame::Audio, 32640 },
		{ MediaFrame::Audio, 34560 },
		{ MediaFrame::Audio, 36480 },
		{ MediaFrame::Audio, 38400 },
		{ MediaFrame::Video, 9009 },
		{ MediaFrame::Audio, 40320 },
		{ MediaFrame::Video, 12012 },
		{ MediaFrame::Audio, 42240 },
		{ MediaFrame::Video, 15015 },
		{ MediaFrame::Audio, 44160 },
		{ MediaFrame::Video, 18018 },
		{ MediaFrame::Video, 21021 },
		{ MediaFrame::Audio, 46080 },
		{ MediaFrame::Audio, 48000 },
		{ MediaFrame::Audio, 49920 },
		{ MediaFrame::Audio, 51840 },
		{ MediaFrame::Video, 24024 },
		{ MediaFrame::Audio, 53760 },
		{ MediaFrame::Audio, 55680 },
		{ MediaFrame::Video, 27027 },
		{ MediaFrame::Audio, 57600 },
		{ MediaFrame::Audio, 59520 },
		{ MediaFrame::Video, 30030 },
		{ MediaFrame::Video, 33033 },
		{ MediaFrame::Video, 36036 },
		{ MediaFrame::Audio, 61440 },
		{ MediaFrame::Audio, 63360 },
		{ MediaFrame::Audio, 65280 },
		{ MediaFrame::Audio, 67200 },
		{ MediaFrame::Video, 39039 },
		{ MediaFrame::Audio, 69120 },
		{ MediaFrame::Audio, 71040 },
		{ MediaFrame::Video, 42042 },
		{ MediaFrame::Audio, 72960 },
		{ MediaFrame::Audio, 74880 },
		{ MediaFrame::Video, 45045 },
		{ MediaFrame::Video, 48048 },
		{ MediaFrame::Video, 51051 },
		{ MediaFrame::Audio, 76800 },
		{ MediaFrame::Audio, 78720 },
		{ MediaFrame::Audio, 80640 },
		{ MediaFrame::Video, 54054 },
		{ MediaFrame::Audio, 82560 },
		{ MediaFrame::Audio, 84480 },
		{ MediaFrame::Audio, 86400 },
		{ MediaFrame::Audio, 88320 },
		{ MediaFrame::Audio, 90240 },
		{ MediaFrame::Video, 57057 },
		{ MediaFrame::Video, 60060 },
		{ MediaFrame::Video, 63063 },
		{ MediaFrame::Video, 66066 },
		{ MediaFrame::Audio, 92160 },
		{ MediaFrame::Audio, 94080 },
		{ MediaFrame::Audio, 96000 },
		{ MediaFrame::Audio, 97920 },
		{ MediaFrame::Video, 69069 },
		{ MediaFrame::Audio, 99840 },
		{ MediaFrame::Audio, 101760 },
		{ MediaFrame::Video, 72072 },
		{ MediaFrame::Audio, 103680 },
		{ MediaFrame::Video, 75075 },
		{ MediaFrame::Audio, 105600 },
		{ MediaFrame::Video, 78078 },
		{ MediaFrame::Video, 81081 },
		{ MediaFrame::Audio, 107520 },
		{ MediaFrame::Audio, 109440 },
		{ MediaFrame::Audio, 111360 },
		{ MediaFrame::Video, 84084 },
		{ MediaFrame::Audio, 113280 },
		{ MediaFrame::Video, 87087 },
		{ MediaFrame::Audio, 115200 },
		{ MediaFrame::Audio, 117120 },
		{ MediaFrame::Video, 90090 },
		{ MediaFrame::Audio, 119040 },
		{ MediaFrame::Audio, 120960 },
		{ MediaFrame::Video, 93094 },
		{ MediaFrame::Video, 96096 },
		{ MediaFrame::Audio, 122880 },
		{ MediaFrame::Audio, 124800 },
		{ MediaFrame::Audio, 126720 },
		{ MediaFrame::Video, 99099 },
		{ MediaFrame::Audio, 128640 },
		{ MediaFrame::Video, 102115 },
		{ MediaFrame::Audio, 130560 },
		{ MediaFrame::Audio, 132480 },
		{ MediaFrame::Video, 105105 },
		{ MediaFrame::Audio, 134400 },
		{ MediaFrame::Audio, 136320 },
		{ MediaFrame::Video, 108108 },
		{ MediaFrame::Video, 111111 },
		{ MediaFrame::Audio, 138240 },
		{ MediaFrame::Audio, 140160 },
		{ MediaFrame::Audio, 142080 },
		{ MediaFrame::Audio, 144000 },
		{ MediaFrame::Video, 114115 },
		{ MediaFrame::Audio, 145920 },
		{ MediaFrame::Audio, 147840 },
		{ MediaFrame::Video, 117117 },
		{ MediaFrame::Audio, 149760 },
		{ MediaFrame::Video, 120120 },
		{ MediaFrame::Video, 123123 },
		{ MediaFrame::Video, 126127 },
		{ MediaFrame::Audio, 151680 },
		{ MediaFrame::Audio, 153600 },
		{ MediaFrame::Audio, 155520 },
		{ MediaFrame::Video, 129130 },
		{ MediaFrame::Audio, 157440 },
		{ MediaFrame::Audio, 159360 },
		{ MediaFrame::Video, 132132 },
		{ MediaFrame::Audio, 161280 },
		{ MediaFrame::Audio, 163200 },
		{ MediaFrame::Audio, 165120 },
		{ MediaFrame::Video, 135135 },
		{ MediaFrame::Video, 138138 },
		{ MediaFrame::Video, 141141 },
		{ MediaFrame::Audio, 167040 },
		{ MediaFrame::Audio, 168960 },
		{ MediaFrame::Audio, 170880 },
		{ MediaFrame::Audio, 172800 },
		{ MediaFrame::Video, 144144 },
		{ MediaFrame::Audio, 174720 },
		{ MediaFrame::Video, 147147 },
		{ MediaFrame::Audio, 176640 },
		{ MediaFrame::Audio, 178560 },
		{ MediaFrame::Audio, 180480 },
		{ MediaFrame::Video, 150150 },
		{ MediaFrame::Video, 153153 },
		{ MediaFrame::Video, 156156 },
		{ MediaFrame::Audio, 182400 },
		{ MediaFrame::Audio, 184320 },
		{ MediaFrame::Audio, 186240 },
		{ MediaFrame::Audio, 188160 },
		{ MediaFrame::Video, 159159 },
		{ MediaFrame::Audio, 190080 },
		{ MediaFrame::Video, 162162 },
		{ MediaFrame::Audio, 192000 },
		{ MediaFrame::Video, 165165 },
		{ MediaFrame::Audio, 193920 },
		{ MediaFrame::Audio, 195840 },
		{ MediaFrame::Video, 168169 },
		{ MediaFrame::Video, 171171 },
		{ MediaFrame::Audio, 197760 },
		{ MediaFrame::Audio, 199680 },
		{ MediaFrame::Audio, 201600 },
		{ MediaFrame::Audio, 203520 },
		{ MediaFrame::Audio, 205440 },
		{ MediaFrame::Video, 174175 },
		{ MediaFrame::Audio, 207360 },
		{ MediaFrame::Video, 177178 },
		{ MediaFrame::Audio, 209280 },
		{ MediaFrame::Video, 180180 },
		{ MediaFrame::Video, 183184 },
		{ MediaFrame::Video, 186187 },
		{ MediaFrame::Audio, 211200 },
		{ MediaFrame::Audio, 213120 },
		{ MediaFrame::Audio, 215040 },
		{ MediaFrame::Audio, 216960 },
		{ MediaFrame::Video, 189190 },
		{ MediaFrame::Audio, 218880 },
		{ MediaFrame::Audio, 220800 },
		{ MediaFrame::Video, 192193 },
		{ MediaFrame::Audio, 222720 },
		{ MediaFrame::Audio, 224640 },
		{ MediaFrame::Video, 195196 },
		{ MediaFrame::Video, 198198 },
		{ MediaFrame::Video, 201202 },
		{ MediaFrame::Audio, 226560 },
		{ MediaFrame::Audio, 228480 },
		{ MediaFrame::Audio, 230400 },
		{ MediaFrame::Video, 204205 },
		{ MediaFrame::Audio, 232320 },
		{ MediaFrame::Audio, 234240 },
		{ MediaFrame::Video, 207208 },
		{ MediaFrame::Audio, 236160 },
		{ MediaFrame::Audio, 238080 },
		{ MediaFrame::Audio, 240000 },
		{ MediaFrame::Video, 210211 },
		{ MediaFrame::Video, 213214 },
		{ MediaFrame::Video, 216217 },
		{ MediaFrame::Audio, 241920 },
		{ MediaFrame::Audio, 243840 },
		{ MediaFrame::Audio, 245760 },
		{ MediaFrame::Video, 219232 },
		{ MediaFrame::Audio, 247680 },
		{ MediaFrame::Audio, 249600 },
		{ MediaFrame::Video, 222223 },
		{ MediaFrame::Audio, 251520 },
		{ MediaFrame::Audio, 253440 },
		{ MediaFrame::Audio, 255360 },
		{ MediaFrame::Video, 225226 },
		{ MediaFrame::Video, 228229 },
		{ MediaFrame::Video, 231232 },
		{ MediaFrame::Audio, 257280 },
		{ MediaFrame::Audio, 259200 },
		{ MediaFrame::Audio, 261120 },
		{ MediaFrame::Audio, 263040 },
		{ MediaFrame::Video, 234235 },
		{ MediaFrame::Audio, 264960 },
		{ MediaFrame::Video, 237238 },
		{ MediaFrame::Audio, 266880 },
		{ MediaFrame::Video, 240241 },
		{ MediaFrame::Audio, 268800 },
		{ MediaFrame::Audio, 270720 },
		{ MediaFrame::Video, 243244 },
		{ MediaFrame::Video, 246247 },
		{ MediaFrame::Audio, 272640 },
		{ MediaFrame::Audio, 274560 },
		{ MediaFrame::Audio, 276480 },
		{ MediaFrame::Audio, 278400 },
		{ MediaFrame::Video, 249250 },
		{ MediaFrame::Audio, 280320 },
		{ MediaFrame::Video, 252253 },
		{ MediaFrame::Audio, 282240 },
		{ MediaFrame::Audio, 284160 },
		{ MediaFrame::Video, 255256 },
		{ MediaFrame::Audio, 286080 },
		{ MediaFrame::Video, 258259 },
		{ MediaFrame::Video, 261262 },
		{ MediaFrame::Audio, 288000 },
		{ MediaFrame::Audio, 289920 },
		{ MediaFrame::Audio, 291840 },
		{ MediaFrame::Video, 264265 },
		{ MediaFrame::Audio, 293760 },
		{ MediaFrame::Video, 267268 },
		{ MediaFrame::Audio, 295680 },
		{ MediaFrame::Audio, 297600 },
		{ MediaFrame::Video, 270271 },
		{ MediaFrame::Audio, 299520 },
		{ MediaFrame::Audio, 301440 },
		{ MediaFrame::Video, 273274 },
		{ MediaFrame::Video, 276277 },
		{ MediaFrame::Audio, 303360 },
		{ MediaFrame::Audio, 305280 },
		{ MediaFrame::Audio, 307200 },
		{ MediaFrame::Video, 279280 },
		{ MediaFrame::Audio, 309120 },
		{ MediaFrame::Video, 282283 },
		{ MediaFrame::Audio, 311040 },
		{ MediaFrame::Audio, 312960 },
		{ MediaFrame::Video, 285286 },
		{ MediaFrame::Audio, 314880 },
		{ MediaFrame::Audio, 316800 },
		{ MediaFrame::Video, 288289 },
		{ MediaFrame::Video, 291292 },
		{ MediaFrame::Audio, 318720 },
		{ MediaFrame::Audio, 320640 },
		{ MediaFrame::Audio, 322560 },
		{ MediaFrame::Video, 294295 },
		{ MediaFrame::Audio, 324480 },
		{ MediaFrame::Video, 297298 },
		{ MediaFrame::Audio, 326400 },
		{ MediaFrame::Audio, 328320 },
		{ MediaFrame::Video, 300301 },
		{ MediaFrame::Audio, 330240 },
		{ MediaFrame::Audio, 332160 },
		{ MediaFrame::Video, 303304 },
		{ MediaFrame::Video, 306307 },
		{ MediaFrame::Video, 309310 },
		{ MediaFrame::Audio, 334080 },
		{ MediaFrame::Audio, 336000 },
		{ MediaFrame::Audio, 337920 },
		{ MediaFrame::Audio, 339840 },
		{ MediaFrame::Audio, 341760 },
		{ MediaFrame::Video, 312313 },
		{ MediaFrame::Audio, 343680 },
		{ MediaFrame::Audio, 345600 },
		{ MediaFrame::Audio, 347520 },
		{ MediaFrame::Video, 315316 },
		{ MediaFrame::Video, 318319 },
		{ MediaFrame::Video, 321322 },
		{ MediaFrame::Video, 324325 },
		{ MediaFrame::Audio, 349440 },
		{ MediaFrame::Audio, 351360 },
		{ MediaFrame::Audio, 353280 },
		{ MediaFrame::Audio, 355200 },
		{ MediaFrame::Video, 327328 },
		{ MediaFrame::Audio, 357120 },
		{ MediaFrame::Audio, 359040 },
		{ MediaFrame::Video, 330331 },
		{ MediaFrame::Audio, 360960 },
		{ MediaFrame::Audio, 362880 },
		{ MediaFrame::Video, 333334 },
		{ MediaFrame::Video, 336356 },
		{ MediaFrame::Video, 339340 },
		{ MediaFrame::Audio, 364800 },
		{ MediaFrame::Audio, 366720 },
		{ MediaFrame::Audio, 368640 },
		{ MediaFrame::Audio, 370560 },
		{ MediaFrame::Video, 342343 },
		{ MediaFrame::Audio, 372480 },
		{ MediaFrame::Audio, 374400 },
		{ MediaFrame::Video, 345346 },
		{ MediaFrame::Audio, 376320 },
		{ MediaFrame::Audio, 378240 },
		{ MediaFrame::Video, 348349 },
		{ MediaFrame::Video, 351352 },
		{ MediaFrame::Video, 354355 },
		{ MediaFrame::Audio, 380160 },
		{ MediaFrame::Audio, 382080 },
		{ MediaFrame::Audio, 384000 },
		{ MediaFrame::Audio, 385920 },
		{ MediaFrame::Video, 357358 },
		{ MediaFrame::Audio, 387840 },
		{ MediaFrame::Audio, 389760 },
		{ MediaFrame::Video, 360361 },
		{ MediaFrame::Audio, 391680 },
		{ MediaFrame::Video, 363364 },
		{ MediaFrame::Audio, 393600 },
		{ MediaFrame::Video, 366367 },
		{ MediaFrame::Video, 369370 },
		{ MediaFrame::Audio, 395520 },
		{ MediaFrame::Audio, 397440 },
		{ MediaFrame::Audio, 399360 },
		{ MediaFrame::Audio, 401280 },
		{ MediaFrame::Video, 372373 },
		{ MediaFrame::Audio, 403200 },
		{ MediaFrame::Video, 375376 },
		{ MediaFrame::Audio, 405120 },
		{ MediaFrame::Audio, 407040 },
		{ MediaFrame::Video, 378379 },
		{ MediaFrame::Audio, 408960 },
		{ MediaFrame::Video, 381382 },
		{ MediaFrame::Video, 384385 },
		{ MediaFrame::Audio, 410880 },
		{ MediaFrame::Audio, 412800 },
		{ MediaFrame::Audio, 414720 },
		{ MediaFrame::Audio, 416640 },
		{ MediaFrame::Video, 387388 },
		{ MediaFrame::Audio, 418560 },
		{ MediaFrame::Video, 390391 },
		{ MediaFrame::Audio, 420480 },
		{ MediaFrame::Audio, 422400 },
		{ MediaFrame::Video, 393394 },
		{ MediaFrame::Audio, 424320 },
		{ MediaFrame::Video, 396397 },
		{ MediaFrame::Video, 399400 },
		{ MediaFrame::Audio, 426240 },
		{ MediaFrame::Audio, 428160 },
		{ MediaFrame::Audio, 430080 },
		{ MediaFrame::Video, 402403 },
		{ MediaFrame::Audio, 432000 },
		{ MediaFrame::Video, 405406 },
		{ MediaFrame::Audio, 433920 },
		{ MediaFrame::Audio, 435840 },
		{ MediaFrame::Video, 408409 },
		{ MediaFrame::Audio, 437760 },
		{ MediaFrame::Audio, 439680 },
		{ MediaFrame::Video, 411412 },
		{ MediaFrame::Video, 414415 },
		{ MediaFrame::Audio, 441600 },
		{ MediaFrame::Audio, 443520 },
		{ MediaFrame::Audio, 445440 },
		{ MediaFrame::Video, 417419 },
		{ MediaFrame::Audio, 447360 },
		{ MediaFrame::Audio, 449280 },
		{ MediaFrame::Video, 420421 },
		{ MediaFrame::Audio, 451200 },
		{ MediaFrame::Video, 423424 },
		{ MediaFrame::Audio, 453120 },
		{ MediaFrame::Video, 426427 },
		{ MediaFrame::Audio, 455040 },
		{ MediaFrame::Video, 429431 },
		{ MediaFrame::Video, 432433 },
		{ MediaFrame::Audio, 456960 },
		{ MediaFrame::Audio, 458880 },
		{ MediaFrame::Audio, 460800 },
		{ MediaFrame::Audio, 462720 },
		{ MediaFrame::Audio, 464640 },
		{ MediaFrame::Video, 435436 },
		{ MediaFrame::Audio, 466560 },
		{ MediaFrame::Video, 438439 },
		{ MediaFrame::Audio, 468480 },
		{ MediaFrame::Audio, 470400 },
		{ MediaFrame::Video, 441442 },
		{ MediaFrame::Video, 444446 },
		{ MediaFrame::Video, 447448 },
		{ MediaFrame::Audio, 472320 },
		{ MediaFrame::Audio, 474240 },
		{ MediaFrame::Audio, 476160 },
		{ MediaFrame::Audio, 478080 },
		{ MediaFrame::Audio, 480000 },
		{ MediaFrame::Video, 450451 },
		{ MediaFrame::Audio, 481920 },
		{ MediaFrame::Video, 453479 },
		{ MediaFrame::Audio, 483840 },
		{ MediaFrame::Audio, 485760 },
		{ MediaFrame::Video, 456457 },
		{ MediaFrame::Video, 459460 },
		{ MediaFrame::Video, 462463 },
		{ MediaFrame::Audio, 487680 },
		{ MediaFrame::Audio, 489600 },
		{ MediaFrame::Audio, 491520 },
		{ MediaFrame::Audio, 493440 },
		{ MediaFrame::Video, 465466 },
		{ MediaFrame::Audio, 495360 },
		{ MediaFrame::Audio, 497280 },
		{ MediaFrame::Audio, 499200 },
		{ MediaFrame::Audio, 501120 },
		{ MediaFrame::Video, 468469 },
		{ MediaFrame::Video, 471472 },
		{ MediaFrame::Video, 474475 },
		{ MediaFrame::Video, 477478 },
		{ MediaFrame::Audio, 503040 },
		{ MediaFrame::Audio, 504960 },
		{ MediaFrame::Audio, 506880 },
		{ MediaFrame::Video, 480482 },
		{ MediaFrame::Audio, 508800 },
		{ MediaFrame::Audio, 510720 },
		{ MediaFrame::Video, 483484 },
		{ MediaFrame::Audio, 512640 },
		{ MediaFrame::Audio, 514560 },
		{ MediaFrame::Audio, 516480 },
		{ MediaFrame::Video, 486487 },
		{ MediaFrame::Video, 489490 },
		{ MediaFrame::Video, 492493 },
		{ MediaFrame::Audio, 518400 },
		{ MediaFrame::Audio, 520320 },
		{ MediaFrame::Audio, 522240 },
		{ MediaFrame::Audio, 524160 },
		{ MediaFrame::Video, 495496 },
		{ MediaFrame::Audio, 526080 },
		{ MediaFrame::Audio, 528000 },
		{ MediaFrame::Video, 498500 },
		{ MediaFrame::Audio, 529920 },
		{ MediaFrame::Video, 501502 },
		{ MediaFrame::Audio, 531840 },
		{ MediaFrame::Video, 504505 },
		{ MediaFrame::Video, 507509 },
		{ MediaFrame::Audio, 533760 },
		{ MediaFrame::Audio, 535680 },
		{ MediaFrame::Audio, 537600 },
		{ MediaFrame::Audio, 539520 },
		{ MediaFrame::Video, 510512 },
		{ MediaFrame::Audio, 541440 },
		{ MediaFrame::Video, 513514 },
		{ MediaFrame::Audio, 543360 },
		{ MediaFrame::Audio, 545280 },
		{ MediaFrame::Audio, 547200 },
		{ MediaFrame::Video, 516518 },
		{ MediaFrame::Video, 519521 },
		{ MediaFrame::Video, 522523 },
		{ MediaFrame::Audio, 549120 },
		{ MediaFrame::Audio, 551040 },
		{ MediaFrame::Audio, 552960 },
		{ MediaFrame::Audio, 554880 },
		{ MediaFrame::Video, 525527 },
		{ MediaFrame::Video, 528530 },
		{ MediaFrame::Audio, 556800 },
		{ MediaFrame::Audio, 558720 },
		{ MediaFrame::Video, 531533 },
		{ MediaFrame::Audio, 560640 },
		{ MediaFrame::Audio, 562560 },
		{ MediaFrame::Video, 534536 },
		{ MediaFrame::Video, 537539 },
		{ MediaFrame::Audio, 564480 },
		{ MediaFrame::Audio, 566400 },
		{ MediaFrame::Audio, 568320 },
		{ MediaFrame::Video, 540542 },
		{ MediaFrame::Audio, 570240 },
		{ MediaFrame::Video, 543545 },
		{ MediaFrame::Audio, 572160 },
		{ MediaFrame::Audio, 574080 },
		{ MediaFrame::Video, 546548 },
		{ MediaFrame::Audio, 576000 },
		{ MediaFrame::Audio, 577920 },
		{ MediaFrame::Video, 549551 },
		{ MediaFrame::Video, 552554 },
		{ MediaFrame::Audio, 579840 },
		{ MediaFrame::Audio, 581760 },
		{ MediaFrame::Audio, 583680 },
		{ MediaFrame::Video, 555557 },
		{ MediaFrame::Audio, 585600 },
		{ MediaFrame::Video, 558560 },
		{ MediaFrame::Audio, 587520 },
		{ MediaFrame::Audio, 589440 },
		{ MediaFrame::Video, 561563 },
		{ MediaFrame::Audio, 591360 },
		{ MediaFrame::Audio, 593280 },
		{ MediaFrame::Video, 564566 },
		{ MediaFrame::Video, 567569 },
		{ MediaFrame::Video, 570597 },
		{ MediaFrame::Audio, 595200 },
		{ MediaFrame::Audio, 597120 },
		{ MediaFrame::Audio, 599040 },
		{ MediaFrame::Audio, 600960 },
		{ MediaFrame::Audio, 602880 },
		{ MediaFrame::Video, 573575 },
		{ MediaFrame::Audio, 604800 },
		{ MediaFrame::Video, 576578 },
		{ MediaFrame::Audio, 606720 },
		{ MediaFrame::Audio, 608640 },
		{ MediaFrame::Video, 579581 },
		{ MediaFrame::Video, 582584 },
		{ MediaFrame::Video, 585587 },
		{ MediaFrame::Audio, 610560 },
		{ MediaFrame::Audio, 612480 },
		{ MediaFrame::Audio, 614400 },
		{ MediaFrame::Audio, 616320 },
		{ MediaFrame::Audio, 618240 },
		{ MediaFrame::Video, 588590 },
		{ MediaFrame::Audio, 620160 },
		{ MediaFrame::Audio, 622080 },
		{ MediaFrame::Audio, 624000 },
		{ MediaFrame::Video, 594596 },
		{ MediaFrame::Video, 597599 },
		{ MediaFrame::Audio, 625920 },
		{ MediaFrame::Video, 600602 },
		{ MediaFrame::Audio, 627840 },
		{ MediaFrame::Audio, 629760 },
		{ MediaFrame::Audio, 631680 },
		{ MediaFrame::Video, 603605 },
		{ MediaFrame::Audio, 633600 },
		{ MediaFrame::Audio, 635520 },
		{ MediaFrame::Video, 606608 },
		{ MediaFrame::Audio, 637440 },
		{ MediaFrame::Audio, 639360 },
		{ MediaFrame::Video, 609611 },
		{ MediaFrame::Video, 612614 },
		{ MediaFrame::Audio, 641280 },
		{ MediaFrame::Audio, 643200 },
		{ MediaFrame::Audio, 645120 },
		{ MediaFrame::Audio, 647040 },
		{ MediaFrame::Video, 615617 },
		{ MediaFrame::Audio, 648960 },
		{ MediaFrame::Video, 618620 },
		{ MediaFrame::Audio, 650880 },
		{ MediaFrame::Audio, 652800 },
		{ MediaFrame::Video, 621623 },
		{ MediaFrame::Video, 624626 },
		{ MediaFrame::Video, 627629 },
		{ MediaFrame::Audio, 654720 },
		{ MediaFrame::Audio, 656640 },
		{ MediaFrame::Audio, 658560 },
		{ MediaFrame::Video, 630632 },
		{ MediaFrame::Audio, 660480 },
		{ MediaFrame::Video, 633635 },
		{ MediaFrame::Audio, 662400 },
		{ MediaFrame::Audio, 664320 },
		{ MediaFrame::Audio, 666240 },
		{ MediaFrame::Video, 636638 },
		{ MediaFrame::Audio, 668160 },
		{ MediaFrame::Video, 639641 },
		{ MediaFrame::Video, 642644 },
		{ MediaFrame::Audio, 670080 },
		{ MediaFrame::Audio, 672000 },
		{ MediaFrame::Audio, 673920 },
		{ MediaFrame::Video, 645647 },
		{ MediaFrame::Audio, 675840 },
		{ MediaFrame::Video, 648650 },
		{ MediaFrame::Audio, 677760 },
		{ MediaFrame::Audio, 679680 },
		{ MediaFrame::Video, 651653 },
		{ MediaFrame::Audio, 681600 },
		{ MediaFrame::Audio, 683520 },
		{ MediaFrame::Video, 654656 },
		{ MediaFrame::Video, 657659 },
		{ MediaFrame::Video, 660662 },
		{ MediaFrame::Audio, 685440 },
		{ MediaFrame::Audio, 687360 },
		{ MediaFrame::Audio, 689280 },
		{ MediaFrame::Audio, 691200 },
		{ MediaFrame::Audio, 693120 },
		{ MediaFrame::Video, 663665 },
		{ MediaFrame::Audio, 695040 },
		{ MediaFrame::Video, 666668 },
		{ MediaFrame::Audio, 696960 },
		{ MediaFrame::Audio, 698880 },
		{ MediaFrame::Video, 669671 },
		{ MediaFrame::Video, 672674 },
		{ MediaFrame::Video, 675677 },
		{ MediaFrame::Audio, 700800 },
		{ MediaFrame::Audio, 702720 },
		{ MediaFrame::Audio, 704640 },
		{ MediaFrame::Audio, 706560 },
		{ MediaFrame::Video, 678680 },
		{ MediaFrame::Audio, 708480 },
		{ MediaFrame::Audio, 710400 },
		{ MediaFrame::Video, 681683 },
		{ MediaFrame::Audio, 712320 },
		{ MediaFrame::Audio, 714240 },
		{ MediaFrame::Video, 684686 },
		{ MediaFrame::Video, 687714 },
		{ MediaFrame::Video, 690692 },
		{ MediaFrame::Audio, 716160 },
		{ MediaFrame::Audio, 718080 },
		{ MediaFrame::Audio, 720000 },
		{ MediaFrame::Video, 693695 },
		{ MediaFrame::Audio, 721920 },
		{ MediaFrame::Audio, 723840 },
		{ MediaFrame::Video, 696698 },
		{ MediaFrame::Audio, 725760 },
		{ MediaFrame::Audio, 727680 },
		{ MediaFrame::Audio, 729600 },
		{ MediaFrame::Video, 699701 },
		{ MediaFrame::Video, 702704 },
		{ MediaFrame::Video, 705707 },
		{ MediaFrame::Audio, 731520 },
		{ MediaFrame::Audio, 733440 },
		{ MediaFrame::Audio, 735360 },
		{ MediaFrame::Audio, 737280 },
		{ MediaFrame::Video, 708710 },
		{ MediaFrame::Audio, 739200 },
		{ MediaFrame::Video, 711713 },
		{ MediaFrame::Audio, 741120 },
		{ MediaFrame::Video, 714716 },
		{ MediaFrame::Audio, 743040 },
		{ MediaFrame::Audio, 744960 },
		{ MediaFrame::Video, 717719 },
		{ MediaFrame::Video, 720722 },
		{ MediaFrame::Audio, 746880 },
		{ MediaFrame::Audio, 748800 },
		{ MediaFrame::Audio, 750720 },
		{ MediaFrame::Audio, 752640 },
		{ MediaFrame::Audio, 754560 },
		{ MediaFrame::Video, 723725 },
		{ MediaFrame::Audio, 756480 },
		{ MediaFrame::Video, 726728 },
		{ MediaFrame::Audio, 758400 },
		{ MediaFrame::Video, 729731 },
		{ MediaFrame::Audio, 760320 },
		{ MediaFrame::Video, 732734 },
		{ MediaFrame::Video, 735737 },
		{ MediaFrame::Audio, 762240 },
		{ MediaFrame::Audio, 764160 },
		{ MediaFrame::Audio, 766080 },
		{ MediaFrame::Audio, 768000 },
		{ MediaFrame::Video, 738740 },
		{ MediaFrame::Video, 741743 },
		{ MediaFrame::Audio, 769920 },
		{ MediaFrame::Audio, 771840 },
		{ MediaFrame::Video, 744746 },
		{ MediaFrame::Audio, 773760 },
		{ MediaFrame::Audio, 775680 },
		{ MediaFrame::Video, 747749 },
		{ MediaFrame::Video, 750752 },
		{ MediaFrame::Audio, 777600 },
		{ MediaFrame::Audio, 779520 },
		{ MediaFrame::Audio, 781440 },
		{ MediaFrame::Audio, 783360 },
		{ MediaFrame::Audio, 785280 },
		{ MediaFrame::Video, 753756 },
		{ MediaFrame::Audio, 787200 },
		{ MediaFrame::Audio, 789120 },
		{ MediaFrame::Video, 756758 },
		{ MediaFrame::Video, 759761 },
		{ MediaFrame::Video, 762764 },
		{ MediaFrame::Audio, 791040 },
		{ MediaFrame::Audio, 792960 },
		{ MediaFrame::Audio, 794880 },
		{ MediaFrame::Audio, 796800 },
		{ MediaFrame::Video, 768770 },
		{ MediaFrame::Audio, 798720 },
		{ MediaFrame::Audio, 800640 },
		{ MediaFrame::Video, 771773 },
		{ MediaFrame::Audio, 802560 },
		{ MediaFrame::Audio, 804480 },
		{ MediaFrame::Video, 774776 },
		{ MediaFrame::Video, 777779 },
		{ MediaFrame::Video, 780782 },
		{ MediaFrame::Audio, 806400 },
		{ MediaFrame::Audio, 808320 },
		{ MediaFrame::Audio, 810240 },
		{ MediaFrame::Video, 783786 },
		{ MediaFrame::Audio, 812160 },
		{ MediaFrame::Audio, 814080 },
		{ MediaFrame::Video, 786788 },
		{ MediaFrame::Audio, 816000 },
		{ MediaFrame::Video, 789791 },
		{ MediaFrame::Audio, 817920 },
		{ MediaFrame::Audio, 819840 },
		{ MediaFrame::Video, 792794 },
		{ MediaFrame::Video, 795797 },
		{ MediaFrame::Audio, 821760 },
		{ MediaFrame::Audio, 823680 },
		{ MediaFrame::Audio, 825600 },
		{ MediaFrame::Audio, 827520 },
		{ MediaFrame::Video, 798800 },
		{ MediaFrame::Audio, 829440 },
		{ MediaFrame::Audio, 831360 },
		{ MediaFrame::Video, 801804 },
		{ MediaFrame::Audio, 833280 },
		{ MediaFrame::Video, 804837 },
		{ MediaFrame::Audio, 835200 },
		{ MediaFrame::Video, 807809 },
		{ MediaFrame::Video, 810813 },
		{ MediaFrame::Audio, 837120 },
		{ MediaFrame::Audio, 839040 },
		{ MediaFrame::Audio, 840960 },
		{ MediaFrame::Audio, 842880 },
		{ MediaFrame::Video, 813816 },
		{ MediaFrame::Video, 816819 },
		{ MediaFrame::Audio, 844800 },
		{ MediaFrame::Audio, 846720 },
		{ MediaFrame::Video, 819821 },
		{ MediaFrame::Audio, 848640 },
		{ MediaFrame::Audio, 850560 },
		{ MediaFrame::Video, 822824 },
		{ MediaFrame::Video, 825827 },
		{ MediaFrame::Audio, 852480 },
		{ MediaFrame::Audio, 854400 },
		{ MediaFrame::Audio, 856320 },
		{ MediaFrame::Video, 828830 },
		{ MediaFrame::Audio, 858240 },
		{ MediaFrame::Video, 831834 },
		{ MediaFrame::Audio, 860160 },
		{ MediaFrame::Audio, 862080 },
		{ MediaFrame::Video, 834836 },
		{ MediaFrame::Audio, 864000 },
		{ MediaFrame::Audio, 865920 },
		{ MediaFrame::Video, 837839 },
		{ MediaFrame::Video, 840842 },
		{ MediaFrame::Audio, 867840 },
		{ MediaFrame::Audio, 869760 },
		{ MediaFrame::Audio, 871680 },
		{ MediaFrame::Audio, 873600 },
		{ MediaFrame::Video, 843846 },
		{ MediaFrame::Audio, 875520 },
		{ MediaFrame::Video, 846849 },
		{ MediaFrame::Audio, 877440 },
		{ MediaFrame::Video, 849851 },
		{ MediaFrame::Audio, 879360 },
		{ MediaFrame::Video, 852854 },
		{ MediaFrame::Audio, 881280 },
		{ MediaFrame::Video, 855858 },
		{ MediaFrame::Audio, 883200 },
		{ MediaFrame::Audio, 885120 },
		{ MediaFrame::Audio, 887040 },
		{ MediaFrame::Video, 858861 },
		{ MediaFrame::Audio, 888960 },
		{ MediaFrame::Video, 861863 },
		{ MediaFrame::Audio, 890880 },
		{ MediaFrame::Video, 864866 },
		{ MediaFrame::Audio, 892800 },
		{ MediaFrame::Audio, 894720 },
		{ MediaFrame::Audio, 896640 },
		{ MediaFrame::Video, 867869 }
	};
	
	std::vector<std::pair<MediaFrame::Type, uint64_t>> actualSentPacketsInfo;
	for (auto it : dispatchedPackets)
	{
		actualSentPacketsInfo.emplace_back(it->GetMediaType(), it->GetExtTimestamp());
	}
		
	ASSERT_EQ(expectedSentPacketsInfo, actualSentPacketsInfo);
}
